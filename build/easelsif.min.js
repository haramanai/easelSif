/*
 Copyright (c) 2012 haramanai.
 easelSif
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
*/
this.easelSif=this.easelSif||{};
(function(){easelSif._getData=function(e){function a(a,d){b[a]?(b[a].constructor!=Array&&(b[a]=[b[a]]),b[a][b[a].length]=d):b[a]=d}var b={},g,d,f;for(g=0;d=e.attributes[g];g++)a("_"+d.name,easelSif._toSifValue(d.value));for(g=0;d=e.childNodes[g];g++)if(1==d.nodeType)if(f=d.nodeName,1==d.childNodes.length&&3==d.firstChild.nodeType)a(d.nodeName,easelSif._toSifValue(d.firstChild.nodeValue));else switch(f){case "param":b[d.getAttribute("name")]=easelSif._getData(d);break;case "layer":"undefined"==typeof b[f]&&
(b[f]=[]);switch(d.getAttribute("type")){case "rotate":case "translate":case "zoom":case "stretch":a(d.nodeName,easelSif._getData(d));break;case "timeloop":b.layer.unshift(easelSif._getData(d));break;default:a(d.nodeName,easelSif._getData(d))}break;case "waypoint":"undefined"==typeof b[f]&&(b[f]=[]);default:a(f,easelSif._getData(d))}return b};easelSif._secsToMillis=function(e){return 1E3*parseFloat(e.replace("s",""))};easelSif._canvasTimeToMillis=function(e,a){var b=0,g;0<e.search("h")&&(g=e.split("h"),
b+=36E5*g[0],e=g[1]);0<e.search("m")&&(g=e.split("m"),b+=6E4*g[0],e=g[1]);0<e.search("s")&&(g=e.split("s"),b+=1E3*g[0],e=g[1]);0<e.search("f")&&(g=e.split("f"),b+=1E3*g[0]/a);return b};easelSif._getLayer=function(e,a){if(easelSif[a._type])return new easelSif[a._type](e,a);if("import"===a._type)return new easelSif.Import(e,a);console.log("EERRROOR  "+a._type+" layer it's not supported");var b=new easelSif.Layer;b.initLayer(e,a);return b};easelSif._toSifValue=function(e){var a=Number(e);return!isNaN(a)?
a:"true"===e?!0:"false"===e?!1:":"===e[0]?e.substr(1):e};easelSif._getEase=function(e){return"linear"===e||"clamped"===e||"halt"===e?createjs.Ease.none:"constant"===e?easelSif.Ease.constant:"auto"===e?createjs.Ease.none:!1};easelSif._getBlend=function(e){switch(e){case 0:return"source-over";case 1:return"copy";case 13:return"source-atop";case 21:return"source-in";case 12:return"destination-over";case 19:return"destination-out";case 14:return"destination-in";default:return"source-over"}};easelSif.aabbFromEntries=
function(e){for(var a=[e[0][0],e[0][1],e[0][0],e[0][1]],b=0,g=e.length;b<g;b++)e[b][0]<a[0]?a[0]=e[b][0]:e[b][0]>a[2]&&(a[2]=e[b][0]),e[b][2]<a[0]?a[0]=e[b][2]:e[b][2]>a[2]&&(a[2]=e[b][2]),e[b][4]<a[0]?a[0]=e[b][4]:e[b][4]>a[2]&&(a[2]=e[b][4]),e[b][1]<a[1]?a[1]=e[b][1]:e[b][1]>a[3]&&(a[3]=e[b][1]),e[b][3]<a[1]?a[1]=e[b][3]:e[b][3]>a[3]&&(a[3]=e[b][3]),e[b][5]<a[1]?a[1]=e[b][5]:e[b][5]>a[3]&&(a[3]=e[b][5]);return a};easelSif.getTotalScale=function(e){for(var a=0;null!=e;)a+=e.scaleX,e=e.parent;return a};
window.easelSif=easelSif})();(function(){Ease={constant:function(e){return 1>e?0:1},bool:function(e){return 1>e?1:0}};easelSif.Ease=Ease})();(function(){function e(b,a){if(a)for(c in a)this[c]=a[c];this.sifPath=this.sifPath||"";this.init(b)}var a=e.prototype=new createjs.Container;a.sifPath="";a.timeline=null;a.desc={};a.init=function(b){this.initialize();this.sifobj=this;b=easelSif._getData(b.getElementsByTagName("canvas")[0]);this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this._getCanvasData(b)};a._getCanvasData=function(b){this.sif={};this.sif.canvas={};this.sif.canvas.version=b._version;this.sif.canvas.width=b._width;
this.sif.canvas.height=b._height;var a=b["_view-box"].split(" ");this.sif.canvas.view_box=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])];this.sif.canvas.antialias=b._antialias;this.sif.canvas.fps=b._fps;this.sif.canvas.begin_time=easelSif._canvasTimeToMillis(b["_begin-time"],this.sif.canvas.fps);this.sif.canvas.end_time=easelSif._canvasTimeToMillis(b["_end-time"],this.sif.canvas.fps);a=b._bgcolor.split(" ");this.sif.canvas.bgcolor={};this.sif.canvas.bgcolor.r=Math.round(256*
parseFloat(a[0]));this.sif.canvas.bgcolor.g=Math.round(256*parseFloat(a[1]));this.sif.canvas.bgcolor.b=Math.round(256*parseFloat(a[2]));this.sif.canvas.bgcolor.a=parseFloat(a[3]);this.sif.canvas.name=b.name;this.sif.canvas.defs=this._getDefs(b.defs);this.timeline.duration=this.sif.canvas.end_time;this.scaleX=this.width/(this.sif.canvas.view_box[2]-this.sif.canvas.view_box[0]);this.scaleY=this.height/(this.sif.canvas.view_box[3]-this.sif.canvas.view_box[1]);this.x=this.width/2;this.y=this.height/2;
this._getLayers(b.layer)};a._getDefs=function(b){var a={};for(name in b)if(b[name].constructor!=Array)"animated"===name?(a[b[name]._id]={},a[b[name]._id].animated=b[name]):(a[b[name]._id]={},a[b[name]._id][name]=b[name],a[b[name]._id]._type=name);else for(var d=0;d<b[name].length;d++)"animated"===name?(a[b[name][d]._id]={},a[b[name][d]._id].animated=b[name][d]):(a[b[name][d]._id]={},a[b[name][d]._id][name]=b[name][d],a[b[name][d]._id]._type=name);return a};a._getLayers=function(b){var a=this.sifobj,
d,f;if(b)for(var e=0,i=b.length;e<i;e++)d=b[e]._type,f=easelSif._getLayer(a,b[e]),("rotate"===d||"translate"===d||"stretch"===d||"zoom"===d)&&this.moveChildrenTo(f),this.addChild(f)};a.moveChildrenTo=function(b){for(var a=[],d=0,f=this.children.length;d<f;d++)a.push(this.children[d]);d=0;for(f=a.length;d<f;d++)b.addChild(a[d])};a.tick=function(b){this.timeline.tick(b);for(var b=this.timeline.position,a=0,d=this.children.length;a<d;a++)b=this.children[a].setPosition(b)};a.setPosition=function(b){this.timeline.setPosition(b);
for(var b=this.timeline.position,a=0,d=this.children.length;a<d;a++)b=this.children[a].setPosition(b);return position};easelSif.SifObject=e})();this.easelSif=this.easelSif||{};this.easelSif.param=this.easelSif.param||{};
(function(){var e=easelSif.param;e._set=function(a,b,g,d,f){var h;f||alert(JSON.stringify(f)+this.type+"  "+b);f.animated&&(h=f.animated._type);f._type&&(h=f._type);f._use?e._set(a,b,g,d,a.sifobj.sif.canvas.defs[f._use]):f.vector||"vector"===h?e.vector._get(a,b,g,d,f):f.integer||"integer"===h?e._getNumber(a,b,g,d,f,"integer"):f.real||"real"===h?e._getNumber(a,b,g,d,f,"real"):f.angle||"angle"===h?e._getNumber(a,b,g,d,f,"angle"):f.bool||"bool"===h?e.bool._get(a,b,g,d,f):f.time||"time"===h?e._getTime(a,
b,g,d,f):f.color||"color"===h?e._getColor(a,b,g,d,f):f.gradient||"gradient"===h?e._getGradient(a,b,g,d,f):f.composite?e.composite._get(a,b,g,d,f):f.bline_point?(d[b]={},d[b].composite={},f.bline_point.vertex?(e._set(a,"point","vector",d[b].composite,f.bline_point.vertex),e._set(a,"t1","vector",d[b].composite,f.bline_point.t1),d[b].composite.split={},d[b].composite.split.getValue=function(){return!1},e.convert._set(a,d[b].composite,g,"bline_point")):alert("not converted bline point")):f.scale||"scale"===
h?(d[b]={},d[b].scale={},f.scale._link&&(f.scale.link=a.sifobj.sif.canvas.defs[f.scale._link]),f.scale._scalar&&(f.scale.scalar=a.sifobj.sif.canvas.defs[f.scale._scalar]),e._set(a,"link",f.scale._type,d[b].scale,f.scale.link),e._set(a,"scalar","real",d[b].scale,f.scale.scalar),e.convert._set(a,d[b],g,"scale")):f.radial_composite||"radial_composite"===h?e._getRadial_composite(a,b,g,d,f):f.add?(h=f.add._type,d[b]={},d[b].add={},f.add._lhs&&(f.add.lhs=a.sifobj.sif.canvas.defs[f.add._lhs]),f.add._rhs&&
(f.add.rhs=a.sifobj.sif.canvas.defs[f.add._rhs]),f.add._scaler&&(f.add.scaler=a.sifobj.sif.canvas.defs[f.add._scaler]),e._set(a,"lhs",h,d[b].add,f.add.lhs),e._set(a,"rhs",h,d[b].add,f.add.rhs),e._set(a,"scalar","real",d[b].add,f.add.scalar),e.convert._set(a,d[b],g,"add")):f.and?(h=f.and._type,d[b]={},d[b].and={},e._set(a,"link1",h,d[b].and,f.and.link1),e._set(a,"link2",h,d[b].and,f.and.link2),e.convert._set(a,d[b],g,"and")):f.atan2?(h=f.atan2._type,d[b]={},d[b].atan2={},f.atan2._x&&(f.atan2.x=a.sifobj.sif.canvas.defs[f.atan2._x]),
f.atan2._y&&(f.atan2.y=a.sifobj.sif.canvas.defs[f.atan2._y]),e._set(a,"x","real",d[b].atan2,f.atan2.x),e._set(a,"y","real",d[b].atan2,f.atan2.y),e.convert._set(a,d[b],g,"atan2")):f.cos?(h=f.cos._type,d[b]={},d[b].cos={},f.cos._angle&&(f.cos.angle=a.sifobj.sif.canvas.defs[f.cos._angle]),f.cos._amp&&(f.cos.amp=a.sifobj.sif.canvas.defs[f.cos._amp]),e._set(a,"angle","angle",d[b].cos,f.cos.angle),e._set(a,"amp","real",d[b].cos,f.cos.amp),e.convert._set(a,d[b],g,"cos")):f.dotproduct?(h=f.dotproduct._type,
d[b]={},d[b].dotproduct={},f.dotproduct._lhs&&(f.dotproduct.lhs=a.sifobj.sif.canvas.defs[f.dotproduct._lhs]),f.dotproduct._rhs&&(f.dotproduct.rhs=a.sifobj.sif.canvas.defs[f.dotproduct._rhs]),e._set(a,"lhs","vector",d[b].dotproduct,f.dotproduct.lhs),e._set(a,"rhs","vector",d[b].dotproduct,f.dotproduct.rhs),e.convert._set(a,d[b],g,"dotproduct")):f.exp?(h=f.exp._type,d[b]={},d[b].exp={},f.exp._exp&&(f.exp.exp=a.sifobj.sif.canvas.defs[f.exp._exp]),f.exp._scale&&(f.exp.scale=a.sifobj.sif.canvas.defs[f.exp._scale]),
e._set(a,"exp","real",d[b].exp,f.exp.exp),e._set(a,"scale","real",d[b].exp,f.exp.scale),e.convert._set(a,d[b],g,"exp")):f.logarithm?(h=f.logarithm._type,d[b]={},d[b].logarithm={},f.logarithm._link&&(f.logarithm.link=a.sifobj.sif.canvas.defs[f.logarithm._link]),e._set(a,"link","real",d[b].logarithm,f.logarithm.link),e._set(a,"epsilon","real",d[b].logarithm,f.logarithm.epsilon),e._set(a,"infinite","real",d[b].logarithm,f.logarithm.infinite),e.convert._set(a,d[b],g,"logarithm")):f.reciprocal?(h=f.reciprocal._type,
d[b]={},d[b].reciprocal={},f.reciprocal._link&&(f.reciprocal.link=a.sifobj.sif.canvas.defs[f.reciprocal._link]),e._set(a,"link","real",d[b].reciprocal,f.reciprocal.link),e._set(a,"epsilon","real",d[b].reciprocal,f.reciprocal.epsilon),e._set(a,"infinite","real",d[b].reciprocal,f.reciprocal.infinite),e.convert._set(a,d[b],g,"reciprocal")):f.subtract?(h=f.subtract._type,d[b]={},d[b].subtract={},f.subtract._lhs&&(f.subtract.lhs=a.sifobj.sif.canvas.defs[f.subtract._lhs]),f.subtract._rhs&&(f.subtract.rhs=
a.sifobj.sif.canvas.defs[f.subtract._rhs]),f.subtract._scalar&&(f.subtract.scalar=a.sifobj.sif.canvas.defs[f.subtract._scalar]),e._set(a,"lhs",h,d[b].subtract,f.subtract.lhs),e._set(a,"rhs",h,d[b].subtract,f.subtract.rhs),e._set(a,"scalar","real",d[b].subtract,f.subtract.scalar),e.convert._set(a,d[b],g,"subtract")):f.sine?(h=f.sine._type,d[b]={},d[b].sine={},f.sine._angle&&(f.sine.angle=a.sifobj.sif.canvas.defs[f.sine._angle]),f.sine._amp&&(f.sine.amp=a.sifobj.sif.canvas.defs[f.sine._amp]),e._set(a,
"angle","angle",d[b].sine,f.sine.angle),e._set(a,"amp","real",d[b].sine,f.sine.amp),e.convert._set(a,d[b],g,"sine")):f.vectorangle?(h=f.vectorangle._type,d[b]={},d[b].vectorangle={},e._set(a,"vector","vector",d[b].vectorangle,f.vectorangle.vector),e.convert._set(a,d[b],g,"vectorangle")):f.greyed?e._set(a,b,g,d,f.greyed.link):(alert("no param type"),alert(JSON.stringify(f)+" layer type : "+a.type))};e._getNumber=function(a,b,g,d,f,h){var i,j;i={paused:!0,useTick:!0};var k=a.timeline,l,n=easelSif._secsToMillis;
d[b]={};if(f.animated){f=f.animated.waypoint;d[b].value=f[0][h]._value;i=createjs.Tween.get(d[b],i);"0s"!==f[0]._time&&(l=easelSif._getEase(f[0]._before),j=n(f[0]._time),i.to({value:f[0][h]._value},j,l));for(var m=0;m<f.length-1;m++)l=easelSif._getEase(f[m+1]._before),j=n(f[m+1]._time)-n(f[m]._time),i.to({value:f[m+1][h]._value},j,l);k.addTween(i)}else f[h]||alert(JSON.stringify(f)+"param_type : "+h+" param_name : "+b+" layer type : "+this.type),d[b].value=f[h]._value;e.convert._set(a,d[b],g,h)};
e._getTime=function(a,b,g,d,f){var h,i;h={paused:!0,useTick:!0};var j=a.timeline,k,l=easelSif._secsToMillis;d[b]={};if(f.animated){f=f.animated.waypoint;d[b].value=l(f[0].time._value);h=createjs.Tween.get(d[b],h);"0s"!==f[0]._time&&(k=easelSif._getEase(f[0]._before),i=l(f[0]._time),h.to({value:l(f[0].time._value)},i,k));for(var n=0;n<f.length-1;n++)k=easelSif._getEase(f[n+1]._before),i=l(f[n+1]._time)-l(f[n]._time),h.to({value:l(f[n+1].time._value)},i,k);j.addTween(h)}else f.time||alert(JSON.stringify(f)+
"param_type : time param_name : "+b+" layer type : "+this.type),d[b].value=l(f.time._value);e.convert._set(a,d[b],g,"integer")};e._getRadial_composite=function(a,b,g,d,f){param_type="radial_composite";d[b]={};d[b]._type=param_type;d[b].radial_composite={};f[param_type]._radius&&(f[param_type].radius=a.sifobj.sif.canvas.defs[f[param_type]._radius]);f[param_type]._theta&&(f[param_type].theta=a.sifobj.sif.canvas.defs[f[param_type]._theta]);e._set(a,"radius","real",d[b][param_type],f[param_type].radius);
e._set(a,"theta","angle",d[b][param_type],f[param_type].theta);e.convert._set(a,d[b],g,param_type)};e._getColor=function(a,b,e,d,f){e={paused:!0,useTick:!0};a=a.timeline;d[b]={};d[b].animated=!0;if(f.animated){w=f.animated.waypoint;d[b].r=w[0].color.r;d[b].g=w[0].color.g;d[b].b=w[0].color.b;d[b].a=w[0].color.a;tw=createjs.Tween.get(d[b],e);"0s"!==w[0]._time&&tw.to({r:w[0].color.r,g:w[0].color.g,b:w[0].color.b,a:w[0].color.a},easelSif._secsToMillis(w[0]._time),easelSif._getEase(w[0]._before));for(b=
0;b<w.length-1;b++)tw.to({r:w[b+1].color.r,g:w[b+1].color.g,b:w[b+1].color.b,a:w[b+1].color.a},easelSif._secsToMillis(w[b+1]._time)-easelSif._secsToMillis(w[b]._time),easelSif._getEase(w[b+1]._before));a.addTween(tw)}else d[b].r=f.color.r,d[b].g=f.color.g,d[b].b=f.color.b,d[b].a=f.color.a};e._getGradient=function(a,b,e,d,f,h){h="gradient";e={paused:!0,useTick:!0};a=a.timeline;d[b]={};var i;if(f.animated){w=f.animated.waypoint;d[h]={};d[h].color=[];for(var j=0,k=w[0].gradient.color.length;j<k;j++){d[h].color.push({});
i=d[h].color[j];b=w[0].gradient.color[j];i.pos=b._pos;i.r=b.r;i.g=b.g;i.b=b.b;i.a=b.a;tw=createjs.Tween.get(i,e);"0s"!==w[0]._time&&tw.to({pos:b._pos,r:b.r,g:b.g,b:b.b,a:b.a},easelSif._secsToMillis(w[0]._time),easelSif._getEase(w[0]._before));f=0;for(i=w.length-1;f<i;f++)b=w[f+1].gradient.color[j],tw.to({pos:b._pos,r:b.r,g:b.g,b:b.b,a:b.a},easelSif._secsToMillis(w[f+1]._time)-easelSif._secsToMillis(w[f]._time),easelSif._getEase(w[f+1]._before));a.addTween(tw)}}else{d[h]={};d[h].color=[];j=0;for(k=
f[h].color.length;j<k;j++)d[h].color.push({}),i=d[h].color[j],b=f[h].color[j],i.pos=b._pos,i.r=b.r,i.g=b.g,i.b=b.b,i.a=b.a}}})();this.easelSif.param=this.easelSif.param||{};
(function(){easelSif.param.vector={_get:function(e,a,b,g,d){var f,h;f={paused:!0,useTick:!0};var i=e.timeline;g[a]={};if(d.animated){d=d.animated.waypoint;g[a].x=d[0].vector.x;g[a].y=d[0].vector.y;f=createjs.Tween.get(g[a],f);"0s"!==d[0]._time&&(h=easelSif._secsToMillis(d[0]._time),f.to({x:d[0].vector.x,y:d[0].vector.y},h,easelSif._getEase(d[0]._before)));for(var j=0;j<d.length-1;j++)h=easelSif._secsToMillis(d[j+1]._time)-easelSif._secsToMillis(d[j]._time),f.to({x:d[j+1].vector.x,y:d[j+1].vector.y},
h,easelSif._getEase(d[j+1]._before));i.addTween(f);easelSif.param.convert._set(e,g[a],b,"vector")}else d.vector?(g[a].x=d.vector.x,g[a].y=d.vector.y,easelSif.param.convert._set(e,g[a],b,"vector",!1)):alert(JSON.stringify(d)+" in vector")},_setConvert:function(e,a,b,g){e=easelSif.param.vector;b===g?(a.getX=e.getX,a.getY=e.getY,a.setVector=e.setVector,a.setX=e.setX,a.setY=e.setY):"radial_composite"===g?(a.getX=e.getRadialX,a.getY=e.getRadialY):"composite"===g?(a.getX=e.getCompositeX,a.getY=e.getCompositeY):
"add"===g?(a.getX=e.getAddX,a.getY=e.getAddY):"scale"===g?a.scale.composite?(a.getX=e.getScaleCompositeX,a.getY=e.getScaleCompositeY):a.scale.radial_composite?(a.getX=e.getScaleRadialX,a.getY=e.getScaleRadialY):(a.getX=e.getScaleX,a.getY=e.getScaleY):"subtract"===g&&(a.getX=e.getSubX,a.getY=e.getSubY)},setVector:function(e,a){this.x=e;this.y=a},setX:function(e){this.x=e},setY:function(e){this.y=e},getX:function(){return this.x},getY:function(){return this.y},getScaleX:function(){return this.scale.link.getX()*
this.scale.scalar.getValue()},getScaleY:function(){return this.scale.link.getY()*this.scale.scalar.getValue()},getScaleCompositeX:function(){return this.scale.composite.x.getValue()*this.scalar.getValue()},getScaleCompositeY:function(){return this.scale.composite.y.getValue()*this.scalar.getValue()},getScaleRadialX:function(){var e=this.scale.radial_composite.theta.getValue()*Math.PI/180,a=this.scale.radial_composite.radius.getValue();return Math.cos(e)*a*this.scalar.getValue()},getScaleRadialY:function(){var e=
this.scale.radial_composite.theta.getValue()*Math.PI/180,a=this.scale.radial_composite.radius.getValue();return Math.sin(e)*a*this.scalar.getValue()},getRadialX:function(){var e=this.radial_composite.theta.getValue()*Math.PI/180,a=this.radial_composite.radius.getValue();return Math.cos(e)*a},getRadialY:function(){var e=this.radial_composite.theta.getValue()*Math.PI/180,a=this.radial_composite.radius.getValue();return Math.sin(e)*a},getCompositeX:function(){return this.composite.x.getValue()},getCompositeY:function(){return this.composite.y.getValue()},
getAddX:function(){return(this.add.lhs.getX()+this.add.rhs.getX())*this.add.scalar.getValue()},getAddY:function(){return(this.add.lhs.getY()+this.add.rhs.getY())*this.add.scalar.getValue()},getSubX:function(){return(this.subtract.lhs.getX()-this.subtract.rhs.getX())*this.subtract.scalar.getValue()},getSubY:function(){return(this.subtract.lhs.getY()-this.subtract.rhs.getY())*this.subtract.scalar.getValue()}}})();this.easelSif.param=this.easelSif.param||{};
(function(){easelSif.param.integer={_setConvert:function(e,a,b,g){e=easelSif.param.integer;b===g?(a.getValue=e.getValue,a.setValue=e.setValue):e[g]?a.getValue=e[g]:alert("no convert for integer to "+g)},setValue:function(e){this.value=e},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()}}})();this.easelSif.param=this.easelSif.param||{};
(function(){var e={degsToRad:0.0174532925,_setConvert:function(a,b,e,d){a=easelSif.param.real;e===d?(b.getValue=a.getValue,b.setValue=a.setValue):a[d]?b.getValue=a[d]:alert("no convert for real to "+d)},setValue:function(a){this.value=a},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()},cos:function(){return this.cos.amp.getValue()*Math.cos(this.cos.angle.getValue()*e.degsToRad)},sine:function(){return this.sine.amp.getValue()*Math.sin(this.sine.angle.getValue()*e.degsToRad)},dotproduct:function(){var a,b,e,d;a=this.dotproduct.lhs.getX();b=this.dotproduct.lhs.getY();e=this.dotproduct.rhs.getX();d=this.dotproduct.rhs.getY();return a*e+b*d},exp:function(){return Math.exp(this.exp.exp.getValue())*this.exp.scale.getValue()},logarithm:function(){var a=this.logarithm.link.getValue();
return a>=this.logarithm.epsilon.getValue()?Math.log(a):-this.logarithm.infinite.getValue()},reciprocal:function(){var a=this.reciprocal.link.getValue();return a>=this.reciprocal.epsilon.getValue()?1/a:-this.reciprocal.infinite.getValue()}};easelSif.param.real=e})();this.easelSif.param=this.easelSif.param||{};
(function(){easelSif.param.angle={_setConvert:function(e,a,b,g){e=easelSif.param.angle;b===g?(a.getValue=e.getValue,a.setValue=e.setValue):e[g]?a.getValue=e[g]:alert("no convert for angle to "+g)},setValue:function(e){this.value=e},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()},atan2:function(){return 180*(Math.atan2(this.atan2.y.getValue(),this.atan2.x.getValue())/Math.PI)},dotproduct:function(){var e,a,b,g;e=this.dotproduct.lhs.getX();a=this.dotproduct.lhs.getY();b=this.dotproduct.rhs.getX();g=this.dotproduct.rhs.getY();return 180*(Math.acos((e*b+a*g)/(Math.sqrt(e*e+a*a)*Math.sqrt(b*b+g*g)))/Math.PI)},vectorangle:function(){return 180*(Math.atan2(this.vectorangle.vector.getY(),this.vectorangle.vector.getX())/Math.PI)}}})();this.easelSif.param=this.easelSif.param||{};
(function(){easelSif.param.bool={_get:function(e,a,b,g,d){var f=easelSif.param,h,i;h={paused:!0,useTick:!0};var j=e.sifobj.timeline,k,l=0,n=[0,1];g[a]={};if(d.animated){d=d.animated.waypoint;g[a].value=d[0].bool._value;h=createjs.Tween.get(g[a],h);"0s"!==d[0]._time&&(k=easelSif.Ease.bool,i=easelSif._secsToMillis(d[0]._time),h.to({value:d[0].bool._value},i,k));for(var m=0;m<d.length-1;m++)k=n[1-l]?easelSif.Ease.bool:easelSif.Ease.constant,l=1-l,i=easelSif._secsToMillis(d[m+1]._time)-easelSif._secsToMillis(d[m]._time),
d[m].bool._value!==d[m+1].bool._value?h.to({value:d[m+1].bool._value},i,k):h.wait(i);j.addTween(h)}else d.bool||alert(JSON.stringify(d)+"param_type : bool param_name : "+a+" layer type : "+this.type),g[a].value=d.bool._value;f.convert._set(e,g[a],b,"bool")},_setConvert:function(e,a,b,g){e=easelSif.param.bool;b===g?(a.getValue=e.getValue,a.setValue=e.setValue):"and"===g&&(a.getValue=e.getAnd)},setValue:function(e){this.value=e},getValue:function(){return this.value},getAnd:function(){return this.link1&&
this.link2}}})();this.easelSif.param=this.easelSif.param||{};
(function(){var e={_get:function(a,b,e,d,f){var h=easelSif.param,i=h._set,j="composite";d[b]={};d[b]._type=j;d[b].composite={};if("vector"===f.composite._type)f[j]._x&&(f[j].x=a.sifobj.sif.canvas.defs[f[j]._x]),f[j]._y&&(f[j].y=a.sifobj.sif.canvas.defs[f[j]._y]),i(a,"x","real",d[b].composite,f.composite.x),i(a,"y","real",d[b].composite,f.composite.y),h.convert._set(a,d[b],e,j);else if("bline_point"===f.composite._type){var k=d[b].composite,j=f.composite._type;f.composite._point&&(f.composite.point=
a.sifobj.sif.canvas.defs[f.composite._point]);i(a,"point","vector",k,f.composite.point);i(a,"width","real",k,f.composite.width);i(a,"origin","real",k,f.composite.origin);i(a,"split","bool",k,f.composite.split);i(a,"t1","vector",k,f.composite.t1);i(a,"t2","vector",k,f.composite.t2);h.convert._set(a,d[b].composite,e,j,f.composite.point.animated||f.composite.width.animated||f.composite.origin.animated||f.composite.t1.animated||f.composite.t2.animated)}},_setConvert:function(a,b,g,d){"bline_point"===
d?(b.getPoint=e.getPoint,b.getT1=e.bline_point_getT1,b.getT2=e.bline_point_getT2):alert("new type of point")},getPoint:function(){return this.point},bline_point_getPoint:function(){return this.point},bline_point_getT1:function(){return{x:this.t1.getX()/3,y:this.t1.getY()/3}},bline_point_getT2:function(){return{x:this.t2.getX()/3,y:this.t2.getY()/3}}};easelSif.param.composite=e})();this.easelSif.param=this.easelSif.param||{};this.easelSif.param.convert=this.easelSif.param.convert||{};(function(){easelSif.param.convert._set=function(e,a,b,g){"vector"===b?easelSif.param[b]._setConvert(e,a,b,g):"real"===b?easelSif.param[b]._setConvert(e,a,b,g):"integer"===b?easelSif.param[b]._setConvert(e,a,b,g):"angle"===b?easelSif.param[b]._setConvert(e,a,b,g):"bool"===b?easelSif.param[b]._setConvert(e,a,b,g):"composite"===b&&easelSif.param[b]._setConvert(e,a,b,g)}})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Shape;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this._getBline(b.bline);a(this,"blend_method","integer",this,b.blend_method);a(this,"amount","real",this,b.amount);a(this,"origin","vector",this,b.origin);a(this.bline,"color","color",this,b.color);b.width&&a(this.bline,"width","real",this,b.width);b._desc&&(this.name=b._desc,this.sifobj.desc[this.name]=
this);this.entries=this.collectEntries();this.makeShape();this.aabb=easelSif.aabbFromEntries(this.entries)};a._getBline=function(b){var a=easelSif.param._set;this.bline={};this.bline.sifobj=this.sifobj;this.bline.timeline=new createjs.Timeline;this.bline.timeline.setPaused(!0);this.bline.entry=[];this.bline.loop=b.bline._loop;for(var d=0,f=b.bline.entry.length;d<f;d++){var e={};a(this.bline,"composite","composite",e,b.bline.entry[d]);this.bline.entry.push(e.composite)}};a.collectEntries=function(){var b=
[],a,d;a=this.bline.entry[0].composite.getPoint();b.push([a.getX(),a.getY()]);for(var f=0,e=this.bline.entry.length-1;f!==e;f++)a=this.bline.entry[f].composite,d=this.bline.entry[f+1].composite,a.split.getValue()?b.push(this._bezierEntry(a.getPoint(),d.getPoint(),a.getT2(),d.getT1())):b.push(this._bezierEntry(a.getPoint(),d.getPoint(),a.getT1(),d.getT1()));this.bline.loop&&(a=this.bline.entry[this.bline.entry.length-1].composite,d=this.bline.entry[0].composite,a.split.getValue()?b.push(this._bezierEntry(a.getPoint(),
d.getPoint(),a.getT2(),d.getT1())):b.push(this._bezierEntry(a.getPoint(),d.getPoint(),a.getT1(),d.getT1())));return b};a._bezierEntry=function(b,a,d,f){var e;e=d.x+b.getX();b=d.y+b.getY();d=-f.x+a.getX();f=-f.y+a.getY();return[e,b,d,f,a.getX(),a.getY()]};a.makeShape=function(){var b=this.entries,a=this.graphics;a.clear();a.f(createjs.Graphics.getRGB(Math.round(256*this.color.r),Math.round(256*this.color.g),Math.round(256*this.color.b),this.color.a));a.mt(b[0][0],b[0][1]);for(var d=1,f=b.length;d!==
f;d++)a.bt(b[d][0],b[d][1],b[d][2],b[d][3],b[d][4],b[d][5]);a.ef()};a.setPosition=function(b){this.timeline.setPosition(b);this.bline.timeline.setPosition(b);this.updateShape();this.updateValues();return b};a.updateShape=function(){var b,a=easelSif.getTotalScale(this);if(this.bline.timeline.duration&&(b=this.collectEntries(),!this.compareEntries(b))){this.uncache();this.entries=b;this.aabb=easelSif.aabbFromEntries(b);this.makeShape();this.animated=!0;return}b=this.aabb;this.cacheID||(this.scale=a,
this.cache(b[0],b[1],b[2]-b[0],b[3]-b[1],a))};a.compareEntries=function(b){var a=this.entries;if(this.entries){if(a[0][0]!==b[0][0]||a[0][1]!==b[0][1])return!1;for(var d=1,f=a.length;d<f;d++)if(a[d][0]!==b[d][0]||a[d][1]!==b[d][1]||a[d][2]!==b[d][2]||a[d][3]!==b[d][3])return!1}else return!1;return!0};a.updateValues=function(){this.x=this.origin.getX();this.y=this.origin.getY();this.alpha=this.amount.getValue();this.compositeOperation=easelSif._getBlend(this.blend_method.getValue())};easelSif.region=
e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Shape;a.init=easelSif.region.prototype.init;a._getBline=easelSif.region.prototype._getBline;a.collectEntries=easelSif.region.prototype.collectEntries;a.compareEntries=easelSif.region.prototype.compareEntries;a._bezierEntry=easelSif.region.prototype._bezierEntry;a.setPosition=easelSif.region.prototype.setPosition;a.updateShape=easelSif.region.prototype.updateShape;a.updateValuesRegion=easelSif.region.prototype.updateValues;
a.updateValues=function(){this.updateValuesRegion()};a.makeShape=function(){var b=this.entries,a=this.graphics;a.clear();a.setStrokeStyle(this.width.getValue());a.s(createjs.Graphics.getRGB(Math.round(256*this.color.r),Math.round(256*this.color.g),Math.round(256*this.color.b),this.color.a));a.mt(b[0][0],b[0][1]);for(var d=1,f=b.length;d!==f;d++)a.bt(b[d][0],b[d][1],b[d][2],b[d][3],b[d][4],b[d][5]);a.es()};easelSif.outline=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Shape;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);a(this,"amount","real",this,b.amount);a(this,"origin","vector",this,b.origin);a(this,"radius","real",this,b.radius);a(this,"blend_method","integer",this,b.blend_method);a(this,"color","color",this,b.color);b._desc&&(this.name=b._desc,this.sifobj.desc[this.name]=this);this.updateValues()};
a.makeShape=function(){var b=this.graphics;this.rad=this.radius.getValue();this.r=this.color.r;this.g=this.color.g;this.b=this.color.b;this.a=this.color.a;b.f(createjs.Graphics.getRGB(Math.round(256*this.r),Math.round(256*this.g),Math.round(256*this.b),this.a));b.dc(0,0,this.rad);b.ef()};a.setPosition=function(b){this.timeline.setPosition(b);this.updateValues();return b};a.updateValues=function(){this.x=this.origin.getX();this.y=this.origin.getY();this.alpha=this.amount.getValue();this.compositeOperation=
easelSif._getBlend(this.blend_method.getValue());(this.rad!==this.radius.getValue()||this.r!==this.color.r||this.g!==this.color.g||this.b!==this.color.b||this.a!==this.color.a)&&this.makeShape()};easelSif.circle=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Bitmap;a.init=function(b){var a=easelSif.param._set;this.initialize(this.sifobj.sifPath+b.filename.string);this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);a(this,"amount","real",this,b.amount);a(this,"blend_method","integer",this,b.blend_method);a(this,"tl","vector",this,b.tl);a(this,"br","vector",this,b.br);this.updateValues()};a.setPosition=function(b){this.timeline.setPosition(b);this.updateValues();
return b};a.updateValues=function(){var b=this.br.getX(),a=this.br.getY(),d=this.tl.getX(),f=this.tl.getY();if(b!==this.brx||a!==this.bry||d!==this.tlx||f!==this.tly)this.brx=b,this.bry=a,this.tlx=d,this.tly=f,b=this.br.getX()-this.tl.getX(),a=this.tl.getY()-this.br.getY(),this.x=d,this.y=f,this.scaleX=0>=b?-1:1,this.scaleY=0>=a?1:-1;this.alpha=this.amount.getValue();this.compositeOperation=easelSif._getBlend(this.blend_method.getValue())};easelSif.Import=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Container;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);a(this,"amount","real",this,b.amount);a(this,"blend_method","integer",this,b.blend_method);a(this,"origin","vector",this,b.origin);a(this,"zoom","real",this,b.zoom);a(this,"focus","vector",this,b.focus);b._desc&&(this.name=b._desc,
this.sifobj.desc[this.name]=this);this._getLayers(b.canvas.canvas.layer);this.updateValues()};a._getLayers=easelSif.SifObject.prototype._getLayers;a.moveChildrenTo=easelSif.SifObject.prototype.moveChildrenTo;a.updateValues=function(){var b=Math.exp(this.zoom.getValue()),a=this.focus.getX(),d=this.focus.getY(),f=this.origin.getX(),e=this.origin.getY();this.x=a;this.y=d;this.scaleY=this.scaleX=b;this.regX=a-f/b;this.regY=d-e/b};a.setPosition=function(b){this.timeline.setPosition(b);this.updateValues();
for(var a=this.timeline.position,d=0,f=this.children.length;d<f;d++)a=this.children[d].setPosition(a);return b};easelSif.PasteCanvas=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Container;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);a(this,"origin","vector",this,b.origin);a(this,"amount","angle",this,b.amount);this.updateValues()};a.setPosition=function(b){this.timeline.setPosition(b);this.updateValues();for(var a=this.children,d=0,f=a.length;d<f;d++)b=a[d].setPosition(b);
return b};a.updateValues=function(){this.x=this.origin.getX();this.y=this.origin.getY();this.rotation=this.amount.getValue();this.regX=this.origin.getX();this.regY=this.origin.getY()};easelSif.rotate=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Container;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);a(this,"amount","vector",this,b.amount);a(this,"center","vector",this,b.center);this.updateValues()};a.setPosition=easelSif.rotate.prototype.setPosition;a.updateValues=function(){var b=this.center.getX();this.center.getY();var a=
this.amount.getX(),d=this.amount.getY();this.y=this.x=b;this.scaleX=a;this.scaleY=d;this.regY=this.regX=b};easelSif.stretch=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Container;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);a(this,"origin","vector",this,b.origin);this.updateValues()};a.setPosition=easelSif.rotate.prototype.setPosition;a.updateValues=function(){this.x=this.origin.getX();this.y=this.origin.getY()};easelSif.translate=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.Container;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);a(this,"center","vector",this,b.center);a(this,"amount","real",this,b.amount);this.updateValues()};a.setPosition=easelSif.rotate.prototype.setPosition;a.updateValues=function(){var b=Math.exp(this.amount.getValue()),a=this.center.getX(),
d=this.center.getY();this.x=a;this.y=d;this.scaleY=this.scaleX=b;this.regX=a/b;this.regY=d/b};easelSif.zoom=e})();(function(){function e(b,a){this.sifobj=b;this.init(a)}var a=e.prototype=new createjs.DisplayObject;a.init=function(b){var a=easelSif.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);a(this,"link_time","integer",this,b.link_time);a(this,"local_time","integer",this,b.local_time);a(this,"duration","integer",this,b.duration);this.timeline.duration=this.sifobj.sif.canvas.end_time-this.sifobj.sif.canvas.begin_time;
this.timeline.loop=!0};a.setPosition=function(a){this.timeline.tick(a-this.timeline.position);var e=this.duration.getValue(),d=this.link_time.getValue(),f=this.local_time.getValue(),a=(a+f)%e;return 0!=e?0<e?a+d:d-a:d};easelSif.timeloop=e})();
