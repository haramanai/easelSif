/*
 Copyright (c) 2012 haramanai.
 sifPlayer
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
*/
this.sifPlayer=this.sifPlayer||{};
(function(){sifPlayer._getData=function(h){function g(d,e){b[d]?(b[d].constructor!=Array&&(b[d]=[b[d]]),b[d][b[d].length]=e):b[d]=e}var b={},d,e,f;for(d=0;e=h.attributes[d];d++)g("_"+e.name,sifPlayer._toSifValue(e.value));for(d=0;e=h.childNodes[d];d++)if(1==e.nodeType)if(f=e.nodeName,1==e.childNodes.length&&3==e.firstChild.nodeType)g(e.nodeName,sifPlayer._toSifValue(e.firstChild.nodeValue));else switch(f){case "param":b[e.getAttribute("name")]=sifPlayer._getData(e);break;case "layer":"undefined"==
typeof b[f]&&(b[f]=[]);switch(e.getAttribute("type")){case "rotate":case "translate":case "zoom":case "stretch":g("layer",{_type:"restore"});b.layer.unshift(sifPlayer._getData(e));break;case "timeloop":b.layer.unshift(sifPlayer._getData(e));break;default:g(e.nodeName,sifPlayer._getData(e))}break;case "waypoint":"undefined"==typeof b[f]&&(b[f]=[]);default:g(f,sifPlayer._getData(e))}return b};sifPlayer._secsToMillis=function(h){return 1E3*parseFloat(h.replace("s",""))};sifPlayer._canvasTimeToMillis=
function(h,g){var b=0,d;0<h.search("h")&&(d=h.split("h"),b+=36E5*d[0],h=d[1]);0<h.search("m")&&(d=h.split("m"),b+=6E4*d[0],h=d[1]);0<h.search("s")&&(d=h.split("s"),b+=1E3*d[0],h=d[1]);0<h.search("f")&&(d=h.split("f"),b+=1E3*d[0]/g);return b};sifPlayer._toSifValue=function(h){var g=Number(h);return!isNaN(g)?g:"true"===h?!0:"false"===h?!1:":"===h[0]?h.substr(1):h};sifPlayer._getEase=function(h){return"linear"===h||"clamped"===h||"halt"===h?createjs.Ease.none:"constant"===h?sifPlayer.Ease.constant:"auto"===
h?createjs.Ease.none:!1};sifPlayer.aabbFromEntries=function(h,g){for(var b=[h[0][0],h[0][1],h[0][0],h[0][1]],d=0,e=h.length;d<e;d++)h[d][0]<b[0]?b[0]=h[d][0]:h[d][0]>b[2]&&(b[2]=h[d][0]),h[d][2]<b[0]?b[0]=h[d][2]:h[d][2]>b[2]&&(b[2]=h[d][2]),h[d][4]<b[0]?b[0]=h[d][4]:h[d][4]>b[2]&&(b[2]=h[d][4]),h[d][1]<b[1]?b[1]=h[d][1]:h[d][1]>b[3]&&(b[3]=h[d][1]),h[d][3]<b[1]?b[1]=h[d][3]:h[d][3]>b[3]&&(b[3]=h[d][3]),h[d][5]<b[1]?b[1]=h[d][5]:h[d][5]>b[3]&&(b[3]=h[d][5]),g&&(b[0]-=g,b[1]-=g,b[2]+=g,b[3]+=g);return b};
sifPlayer._addToDesc=function(h,g){g._desc&&(h.name=g._desc,h.sifobj.desc[h.name]=h)};window.sifPlayer=sifPlayer})();(function(){var h={_getData:function(g){function b(b,e){d[b]?(d[b].constructor!=Array&&(d[b]=[d[b]]),d[b][d[b].length]=e):d[b]=e}var d={},e,f,i;for(e=0;f=g.attributes[e];e++)b("_"+f.name,sifPlayer._toSifValue(f.value));for(e=0;f=g.childNodes[e];e++)if(1==f.nodeType)if(i=f.nodeName,1==f.childNodes.length&&3==f.firstChild.nodeType)b(f.nodeName,sifPlayer._toSifValue(f.firstChild.nodeValue));else switch(i){case "param":d[f.getAttribute("name")]=h._getData(f);break;case "layer":"undefined"==typeof d[i]&&
(d[i]=[]);switch(f.getAttribute("type")){case "rotate":case "translate":case "zoom":case "stretch":b(f.nodeName,h._getData(f));break;case "timeloop":d.layer.unshift(h._getData(f));break;default:b(f.nodeName,h._getData(f))}break;case "waypoint":case "entry":case "bone_root":case "bone":"undefined"==typeof d[i]&&(d[i]=[]);default:b(i,h._getData(f))}return d},getTotalScale:function(g){for(var b=1;null!=g;)b*=g.scaleX,g=g.parent;return b},_getLayer:function(g,b){if(sifPlayer.easelSif[b._type])return new sifPlayer.easelSif[b._type](g,
b);if("import"===b._type)return new sifPlayer.easelSif.Import(g,b);console.log("EERRROOR  "+b._type+" layer it's not supported")},_setTimeline:function(g){g.timeline=new createjs.Timeline;g.timeline.setPaused(!0)},_getBlend:function(g){switch(g){case 0:return"source-over";case 1:return"copy";case 13:return"source-atop";case 21:return"source-in";case 12:return"destination-over";case 19:return"destination-out";case 14:return"destination-in";default:return"source-over"}}};sifPlayer.easelSif=h})();(function(){Ease={constant:function(h){return 1>h?0:1},bool:function(h){return 1>h?1:0}};sifPlayer.Ease=Ease})();this.sifPlayer=this.sifPlayer||{};
(function(){function h(b,d){this.init(b,d)}var g=h.prototype;g.init=function(b,d){var e=sifPlayer.param._set;this.name=d.name.string;this.parent=d.parent.bone_valuenode._guid;this.sifobj=b;this.timeline=new createjs.Timeline;this.guid=d._guid;e(this,"origin","vector",this,d.origin);e(this,"angle","angle",this,d.angle);e(this,"scalelx","real",this,d.scalelx);e(this,"width","real",this,d.width);e(this,"scalex","real",this,d.scalex);e(this,"tipwidth","real",this,d.tipwidth);e(this,"length","real",this,
d.length);this._m=new createjs.Matrix2D;this._lm=new createjs.Matrix2D};g.setMatrix=function(){var b=this.sifobj.sif.bones.guid[this.parent],d=this.origin.getX(),e=this.origin.getY(),f=this.scalelx.getValue(),g=this.scalex.getValue(),h=this.angle.getValue();this.length.getValue();var j=1;b?(this._m.copy(b._lm),j=b.scalelx.getValue(),a=b.angle.getValue()):this._m.identity();this._lm.copy(this._m);this._m.appendTransform(d*j,e,f*g,1,h,0,0,0,0);this._lm.appendTransform(d*j,e,g,1,h,0,0,0,0)};g.getParentScale=
function(){var b=this.sifobj.sif.bones.guid[this.parent],d=new createjs.Point(0,0);b&&(d.x=b._m.a,d.y=b._m.d);return d};g.setPosition=function(b){this.timeline.setPosition(b);this.setMatrix();return b};sifPlayer.Bone=h})();(function(){function h(b,d){if(d)for(c in d)this[c]=d[c];this.sifPath=this.sifPath||"";this.init(b)}var g=h.prototype=new createjs.Container;g.sifPath="";g.timeline=null;g.desc={};g.init=function(b){this.initialize();this.sifobj=this;b=sifPlayer.easelSif._getData(b.getElementsByTagName("canvas")[0]);this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this._getCanvasData(b)};g._getCanvasData=function(b){this.sif={};this.sif.canvas={};this.sif.canvas.version=b._version;this.sif.canvas.width=
b._width;this.sif.canvas.height=b._height;var d=b["_view-box"].split(" ");this.sif.canvas.view_box=[parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])];this.sif.canvas.antialias=b._antialias;this.sif.canvas.fps=b._fps;this.sif.canvas.begin_time=sifPlayer._canvasTimeToMillis(b["_begin-time"],this.sif.canvas.fps);this.sif.canvas.end_time=sifPlayer._canvasTimeToMillis(b["_end-time"],this.sif.canvas.fps);d=b._bgcolor.split(" ");this.sif.canvas.bgcolor={};this.sif.canvas.bgcolor.r=Math.round(256*
parseFloat(d[0]));this.sif.canvas.bgcolor.g=Math.round(256*parseFloat(d[1]));this.sif.canvas.bgcolor.b=Math.round(256*parseFloat(d[2]));this.sif.canvas.bgcolor.a=parseFloat(d[3]);this.sif.canvas.name=b.name;this.sif.canvas.defs=this._getDefs(b.defs);this._getBones(b);this.timeline.duration=this.sif.canvas.end_time;this.scaleX=this.width/(this.sif.canvas.view_box[2]-this.sif.canvas.view_box[0]);this.scaleY=this.height/(this.sif.canvas.view_box[3]-this.sif.canvas.view_box[1]);this.x=this.width/2;this.y=
this.height/2;this._getLayers(b.layer)};g._getDefs=function(b){var d={};for(name in b)if(b[name].constructor!=Array)"animated"===name?(d[b[name]._id]={},d[b[name]._id].animated=b[name]):(d[b[name]._id]={},d[b[name]._id][name]=b[name],d[b[name]._id]._type=name);else for(var e=0;e<b[name].length;e++)"animated"===name?(d[b[name][e]._id]={},d[b[name][e]._id].animated=b[name][e]):(d[b[name][e]._id]={},d[b[name][e]._id][name]=b[name][e],d[b[name][e]._id]._type=name);return d};g._getBones=function(b){if(b=
b.bones){this.sif.bones={};for(var d=this.sif.bones.guid={},e=0,f=b.bone.length;e<f;e++)d[b.bone[e]._guid]=new sifPlayer.Bone(this,b.bone[e])}};g._getLayers=function(b){var d=this.sifobj,e,f;if(b)for(var g=0,h=b.length;g<h;g++)e=b[g]._type,f=sifPlayer.easelSif._getLayer(d,b[g]),("rotate"===e||"translate"===e||"stretch"===e||"zoom"===e)&&this.moveChildrenTo(f),this.addChild(f)};g.moveChildrenTo=function(b){for(var d=[],e=0,f=this.children.length;e<f;e++)d.push(this.children[e]);e=0;for(f=d.length;e<
f;e++)b.addChild(d[e])};g.tick=function(b){this.animated=!1;this.timeline.tick(b);for(var d=this.timeline.position,e=this.children,f=0,g=this.children.length;f<g;f++)d=e[f].unsynced?e[f].setPosition(e[f].timeline.position+b,b):e[f].setPosition(d,b),e[f].animated&&(this.childAnimated=this.animated=!0)};g.setPosition=function(b){this.timeline.setPosition(b);for(var b=this.timeline.position,d=0,e=this.children.length;d<e;d++)b=this.children[d].setPosition(b)};sifPlayer.easelSif.SifObject=h})();this.sifPlayer=this.sifPlayer||{};this.sifPlayer.param=this.sifPlayer.param||{};
(function(){var h=sifPlayer.param;h._set=function(g,b,d,e,f){var i;f||alert(JSON.stringify(f)+this.type+"  "+b);f.animated&&(i=f.animated._type);f._type&&(i=f._type);f._use?h._set(g,b,d,e,g.sifobj.sif.canvas.defs[f._use]):f.vector||"vector"===i?h.vector._get(g,b,d,e,f):f.integer||"integer"===i?h._getNumber(g,b,d,e,f,"integer"):f.real||"real"===i?h._getNumber(g,b,d,e,f,"real"):f.angle||"angle"===i?h._getNumber(g,b,d,e,f,"angle"):f.bool||"bool"===i?h.bool._get(g,b,d,e,f):f.time||"time"===i?h._getTime(g,
b,d,e,f):f.color||"color"===i?h._getColor(g,b,d,e,f):f.gradient||"gradient"===i?h._getGradient(g,b,d,e,f):f.composite?h.composite._get(g,b,d,e,f):f.bline_point?(e[b]={},e[b].composite={},f.bline_point.vertex?(h._set(g,"point","vector",e[b].composite,f.bline_point.vertex),h._set(g,"t1","vector",e[b].composite,f.bline_point.t1),e[b].composite.split={},e[b].composite.split.getValue=function(){return!1},h.convert._set(g,e[b].composite,d,"bline_point")):alert("not converted bline point")):f.scale||"scale"===
i?(e[b]={},e[b].scale={},f.scale._link&&(f.scale.link=g.sifobj.sif.canvas.defs[f.scale._link]),f.scale._scalar&&(f.scale.scalar=g.sifobj.sif.canvas.defs[f.scale._scalar]),h._set(g,"link",f.scale._type,e[b].scale,f.scale.link),h._set(g,"scalar","real",e[b].scale,f.scale.scalar),h.convert._set(g,e[b],d,"scale")):f.radial_composite||"radial_composite"===i?h._getRadial_composite(g,b,d,e,f):f.add?(i=f.add._type,e[b]={},e[b].add={},f.add._lhs&&(f.add.lhs=g.sifobj.sif.canvas.defs[f.add._lhs]),f.add._rhs&&
(f.add.rhs=g.sifobj.sif.canvas.defs[f.add._rhs]),f.add._scaler&&(f.add.scaler=g.sifobj.sif.canvas.defs[f.add._scaler]),h._set(g,"lhs",i,e[b].add,f.add.lhs),h._set(g,"rhs",i,e[b].add,f.add.rhs),h._set(g,"scalar","real",e[b].add,f.add.scalar),h.convert._set(g,e[b],d,"add")):f.and?(i=f.and._type,e[b]={},e[b].and={},h._set(g,"link1",i,e[b].and,f.and.link1),h._set(g,"link2",i,e[b].and,f.and.link2),h.convert._set(g,e[b],d,"and")):f.atan2?(i=f.atan2._type,e[b]={},e[b].atan2={},f.atan2._x&&(f.atan2.x=g.sifobj.sif.canvas.defs[f.atan2._x]),
f.atan2._y&&(f.atan2.y=g.sifobj.sif.canvas.defs[f.atan2._y]),h._set(g,"x","real",e[b].atan2,f.atan2.x),h._set(g,"y","real",e[b].atan2,f.atan2.y),h.convert._set(g,e[b],d,"atan2")):f.cos?(i=f.cos._type,e[b]={},e[b].cos={},f.cos._angle&&(f.cos.angle=g.sifobj.sif.canvas.defs[f.cos._angle]),f.cos._amp&&(f.cos.amp=g.sifobj.sif.canvas.defs[f.cos._amp]),h._set(g,"angle","angle",e[b].cos,f.cos.angle),h._set(g,"amp","real",e[b].cos,f.cos.amp),h.convert._set(g,e[b],d,"cos")):f.dotproduct?(i=f.dotproduct._type,
e[b]={},e[b].dotproduct={},f.dotproduct._lhs&&(f.dotproduct.lhs=g.sifobj.sif.canvas.defs[f.dotproduct._lhs]),f.dotproduct._rhs&&(f.dotproduct.rhs=g.sifobj.sif.canvas.defs[f.dotproduct._rhs]),h._set(g,"lhs","vector",e[b].dotproduct,f.dotproduct.lhs),h._set(g,"rhs","vector",e[b].dotproduct,f.dotproduct.rhs),h.convert._set(g,e[b],d,"dotproduct")):f.exp?(i=f.exp._type,e[b]={},e[b].exp={},f.exp._exp&&(f.exp.exp=g.sifobj.sif.canvas.defs[f.exp._exp]),f.exp._scale&&(f.exp.scale=g.sifobj.sif.canvas.defs[f.exp._scale]),
h._set(g,"exp","real",e[b].exp,f.exp.exp),h._set(g,"scale","real",e[b].exp,f.exp.scale),h.convert._set(g,e[b],d,"exp")):f.logarithm?(i=f.logarithm._type,e[b]={},e[b].logarithm={},f.logarithm._link&&(f.logarithm.link=g.sifobj.sif.canvas.defs[f.logarithm._link]),h._set(g,"link","real",e[b].logarithm,f.logarithm.link),h._set(g,"epsilon","real",e[b].logarithm,f.logarithm.epsilon),h._set(g,"infinite","real",e[b].logarithm,f.logarithm.infinite),h.convert._set(g,e[b],d,"logarithm")):f.reciprocal?(i=f.reciprocal._type,
e[b]={},e[b].reciprocal={},f.reciprocal._link&&(f.reciprocal.link=g.sifobj.sif.canvas.defs[f.reciprocal._link]),h._set(g,"link","real",e[b].reciprocal,f.reciprocal.link),h._set(g,"epsilon","real",e[b].reciprocal,f.reciprocal.epsilon),h._set(g,"infinite","real",e[b].reciprocal,f.reciprocal.infinite),h.convert._set(g,e[b],d,"reciprocal")):f.subtract?(i=f.subtract._type,e[b]={},e[b].subtract={},f.subtract._lhs&&(f.subtract.lhs=g.sifobj.sif.canvas.defs[f.subtract._lhs]),f.subtract._rhs&&(f.subtract.rhs=
g.sifobj.sif.canvas.defs[f.subtract._rhs]),f.subtract._scalar&&(f.subtract.scalar=g.sifobj.sif.canvas.defs[f.subtract._scalar]),h._set(g,"lhs",i,e[b].subtract,f.subtract.lhs),h._set(g,"rhs",i,e[b].subtract,f.subtract.rhs),h._set(g,"scalar","real",e[b].subtract,f.subtract.scalar),h.convert._set(g,e[b],d,"subtract")):f.sine?(i=f.sine._type,e[b]={},e[b].sine={},f.sine._angle&&(f.sine.angle=g.sifobj.sif.canvas.defs[f.sine._angle]),f.sine._amp&&(f.sine.amp=g.sifobj.sif.canvas.defs[f.sine._amp]),h._set(g,
"angle","angle",e[b].sine,f.sine.angle),h._set(g,"amp","real",e[b].sine,f.sine.amp),h.convert._set(g,e[b],d,"sine")):f.vectorangle?(i=f.vectorangle._type,e[b]={},e[b].vectorangle={},h._set(g,"vector","vector",e[b].vectorangle,f.vectorangle.vector),h.convert._set(g,e[b],d,"vectorangle")):f.greyed?h._set(g,b,d,e,f.greyed.link):(alert("no param type"),alert(JSON.stringify(f)+" layer type : "+g.type))};h._getNumber=function(g,b,d,e,f,i){var k,j;k={paused:!0,useTick:!0};var l=g.timeline,m,p=sifPlayer._secsToMillis;
e[b]={};if(f.animated){f=f.animated.waypoint;e[b].value=f[0][i]._value;k=createjs.Tween.get(e[b],k);"0s"!==f[0]._time&&(m=sifPlayer._getEase(f[0]._before),j=p(f[0]._time),k.to({value:f[0][i]._value},j,m));for(var n=0;n<f.length-1;n++)m=sifPlayer._getEase(f[n+1]._before),j=p(f[n+1]._time)-p(f[n]._time),k.to({value:f[n+1][i]._value},j,m);l.addTween(k)}else f[i]||alert(JSON.stringify(f)+"param_type : "+i+" param_name : "+b+" layer type : "+this.type),e[b].value=f[i]._value;h.convert._set(g,e[b],d,i)};
h._getTime=function(g,b,d,e,f){var i,k;i={paused:!0,useTick:!0};var j=g.timeline,l,m=sifPlayer._secsToMillis;e[b]={};if(f.animated){f=f.animated.waypoint;e[b].value=m(f[0].time._value);i=createjs.Tween.get(e[b],i);"0s"!==f[0]._time&&(l=sifPlayer._getEase(f[0]._before),k=m(f[0]._time),i.to({value:m(f[0].time._value)},k,l));for(var p=0;p<f.length-1;p++)l=sifPlayer._getEase(f[p+1]._before),k=m(f[p+1]._time)-m(f[p]._time),i.to({value:m(f[p+1].time._value)},k,l);j.addTween(i)}else f.time||alert(JSON.stringify(f)+
"param_type : time param_name : "+b+" layer type : "+this.type),e[b].value=m(f.time._value);h.convert._set(g,e[b],d,"integer")};h._getRadial_composite=function(g,b,d,e,f){param_type="radial_composite";e[b]={};e[b]._type=param_type;e[b].radial_composite={};f[param_type]._radius&&(f[param_type].radius=g.sifobj.sif.canvas.defs[f[param_type]._radius]);f[param_type]._theta&&(f[param_type].theta=g.sifobj.sif.canvas.defs[f[param_type]._theta]);h._set(g,"radius","real",e[b][param_type],f[param_type].radius);
h._set(g,"theta","angle",e[b][param_type],f[param_type].theta);h.convert._set(g,e[b],d,param_type)};h._getColor=function(g,b,d,e,f){d={paused:!0,useTick:!0};g=g.timeline;e[b]={};e[b].animated=!0;if(f.animated){w=f.animated.waypoint;e[b].r=w[0].color.r;e[b].g=w[0].color.g;e[b].b=w[0].color.b;e[b].a=w[0].color.a;tw=createjs.Tween.get(e[b],d);"0s"!==w[0]._time&&tw.to({r:w[0].color.r,g:w[0].color.g,b:w[0].color.b,a:w[0].color.a},sifPlayer._secsToMillis(w[0]._time),sifPlayer._getEase(w[0]._before));for(b=
0;b<w.length-1;b++)tw.to({r:w[b+1].color.r,g:w[b+1].color.g,b:w[b+1].color.b,a:w[b+1].color.a},sifPlayer._secsToMillis(w[b+1]._time)-sifPlayer._secsToMillis(w[b]._time),sifPlayer._getEase(w[b+1]._before));g.addTween(tw)}else e[b].r=f.color.r,e[b].g=f.color.g,e[b].b=f.color.b,e[b].a=f.color.a};h._getGradient=function(g,b,d,e,f,h){h="gradient";d={paused:!0,useTick:!0};g=g.timeline;e[b]={};var k;if(f.animated){w=f.animated.waypoint;e[h]={};e[h].color=[];for(var j=0,l=w[0].gradient.color.length;j<l;j++){e[h].color.push({});
k=e[h].color[j];b=w[0].gradient.color[j];k.pos=b._pos;k.r=b.r;k.g=b.g;k.b=b.b;k.a=b.a;tw=createjs.Tween.get(k,d);"0s"!==w[0]._time&&tw.to({pos:b._pos,r:b.r,g:b.g,b:b.b,a:b.a},sifPlayer._secsToMillis(w[0]._time),sifPlayer._getEase(w[0]._before));f=0;for(k=w.length-1;f<k;f++)b=w[f+1].gradient.color[j],tw.to({pos:b._pos,r:b.r,g:b.g,b:b.b,a:b.a},sifPlayer._secsToMillis(w[f+1]._time)-sifPlayer._secsToMillis(w[f]._time),sifPlayer._getEase(w[f+1]._before));g.addTween(tw)}}else{e[h]={};e[h].color=[];j=0;
for(l=f[h].color.length;j<l;j++)e[h].color.push({}),k=e[h].color[j],b=f[h].color[j],k.pos=b._pos,k.r=b.r,k.g=b.g,k.b=b.b,k.a=b.a}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.vector={_get:function(h,g,b,d,e){var f,i;f={paused:!0,useTick:!0};var k=h.timeline;d[g]={};if(e.animated){e=e.animated.waypoint;d[g].x=e[0].vector.x;d[g].y=e[0].vector.y;f=createjs.Tween.get(d[g],f);"0s"!==e[0]._time&&(i=sifPlayer._secsToMillis(e[0]._time),f.to({x:e[0].vector.x,y:e[0].vector.y},i,sifPlayer._getEase(e[0]._before)));for(var j=0;j<e.length-1;j++)i=sifPlayer._secsToMillis(e[j+1]._time)-sifPlayer._secsToMillis(e[j]._time),f.to({x:e[j+1].vector.x,y:e[j+1].vector.y},
i,sifPlayer._getEase(e[j+1]._before));k.addTween(f);sifPlayer.param.convert._set(h,d[g],b,"vector")}else e.vector?(d[g].x=e.vector.x,d[g].y=e.vector.y,sifPlayer.param.convert._set(h,d[g],b,"vector",!1)):alert(JSON.stringify(e)+" in vector")},_setConvert:function(h,g,b,d){h=sifPlayer.param.vector;b===d?(g.getX=h.getX,g.getY=h.getY,g.setVector=h.setVector,g.setX=h.setX,g.setY=h.setY):"radial_composite"===d?(g.getX=h.getRadialX,g.getY=h.getRadialY):"composite"===d?(g.getX=h.getCompositeX,g.getY=h.getCompositeY):
"add"===d?(g.getX=h.getAddX,g.getY=h.getAddY):"scale"===d?g.scale.composite?(g.getX=h.getScaleCompositeX,g.getY=h.getScaleCompositeY):g.scale.radial_composite?(g.getX=h.getScaleRadialX,g.getY=h.getScaleRadialY):(g.getX=h.getScaleX,g.getY=h.getScaleY):"subtract"===d&&(g.getX=h.getSubX,g.getY=h.getSubY)},setVector:function(h,g){this.x=h;this.y=g},setX:function(h){this.x=h},setY:function(h){this.y=h},getX:function(){return this.x},getY:function(){return this.y},getScaleX:function(){return this.scale.link.getX()*
this.scale.scalar.getValue()},getScaleY:function(){return this.scale.link.getY()*this.scale.scalar.getValue()},getScaleCompositeX:function(){return this.scale.composite.x.getValue()*this.scalar.getValue()},getScaleCompositeY:function(){return this.scale.composite.y.getValue()*this.scalar.getValue()},getScaleRadialX:function(){var h=this.scale.radial_composite.theta.getValue()*Math.PI/180,g=this.scale.radial_composite.radius.getValue();return Math.cos(h)*g*this.scalar.getValue()},getScaleRadialY:function(){var h=
this.scale.radial_composite.theta.getValue()*Math.PI/180,g=this.scale.radial_composite.radius.getValue();return Math.sin(h)*g*this.scalar.getValue()},getRadialX:function(){var h=this.radial_composite.theta.getValue()*Math.PI/180,g=this.radial_composite.radius.getValue();return Math.cos(h)*g},getRadialY:function(){var h=this.radial_composite.theta.getValue()*Math.PI/180,g=this.radial_composite.radius.getValue();return Math.sin(h)*g},getCompositeX:function(){return this.composite.x.getValue()},getCompositeY:function(){return this.composite.y.getValue()},
getAddX:function(){return(this.add.lhs.getX()+this.add.rhs.getX())*this.add.scalar.getValue()},getAddY:function(){return(this.add.lhs.getY()+this.add.rhs.getY())*this.add.scalar.getValue()},getSubX:function(){return(this.subtract.lhs.getX()-this.subtract.rhs.getX())*this.subtract.scalar.getValue()},getSubY:function(){return(this.subtract.lhs.getY()-this.subtract.rhs.getY())*this.subtract.scalar.getValue()}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.integer={_setConvert:function(h,g,b,d){h=sifPlayer.param.integer;b===d?(g.getValue=h.getValue,g.setValue=h.setValue):h[d]?g.getValue=h[d]:alert("no convert for integer to "+d)},setValue:function(h){this.value=h},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){var h={degsToRad:0.0174532925,_setConvert:function(g,b,d,e){g=sifPlayer.param.real;d===e?(b.getValue=g.getValue,b.setValue=g.setValue):g[e]?b.getValue=g[e]:alert("no convert for real to "+e)},setValue:function(g){this.value=g},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()},cos:function(){return this.cos.amp.getValue()*Math.cos(this.cos.angle.getValue()*h.degsToRad)},sine:function(){return this.sine.amp.getValue()*Math.sin(this.sine.angle.getValue()*h.degsToRad)},dotproduct:function(){var g,b,d,e;g=this.dotproduct.lhs.getX();b=this.dotproduct.lhs.getY();d=this.dotproduct.rhs.getX();e=this.dotproduct.rhs.getY();return g*d+b*e},exp:function(){return Math.exp(this.exp.exp.getValue())*this.exp.scale.getValue()},logarithm:function(){var g=this.logarithm.link.getValue();
return g>=this.logarithm.epsilon.getValue()?Math.log(g):-this.logarithm.infinite.getValue()},reciprocal:function(){var g=this.reciprocal.link.getValue();return g>=this.reciprocal.epsilon.getValue()?1/g:-this.reciprocal.infinite.getValue()}};sifPlayer.param.real=h})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.angle={_setConvert:function(h,g,b,d){h=sifPlayer.param.angle;b===d?(g.getValue=h.getValue,g.setValue=h.setValue):h[d]?g.getValue=h[d]:alert("no convert for angle to "+d)},setValue:function(h){this.value=h},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()},atan2:function(){return 180*(Math.atan2(this.atan2.y.getValue(),this.atan2.x.getValue())/Math.PI)},dotproduct:function(){var h,g,b,d;h=this.dotproduct.lhs.getX();g=this.dotproduct.lhs.getY();b=this.dotproduct.rhs.getX();d=this.dotproduct.rhs.getY();return 180*(Math.acos((h*b+g*d)/(Math.sqrt(h*h+g*g)*Math.sqrt(b*b+d*d)))/Math.PI)},vectorangle:function(){return 180*(Math.atan2(this.vectorangle.vector.getY(),this.vectorangle.vector.getX())/Math.PI)}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.bool={_get:function(h,g,b,d,e){var f=sifPlayer.param,i,k;i={paused:!0,useTick:!0};var j=h.sifobj.timeline,l,m=0,p=[0,1];d[g]={};if(e.animated){e=e.animated.waypoint;d[g].value=e[0].bool._value;i=createjs.Tween.get(d[g],i);"0s"!==e[0]._time&&(l=sifPlayer.Ease.bool,k=sifPlayer._secsToMillis(e[0]._time),i.to({value:e[0].bool._value},k,l));for(var n=0;n<e.length-1;n++)l=p[1-m]?sifPlayer.Ease.bool:sifPlayer.Ease.constant,m=1-m,k=sifPlayer._secsToMillis(e[n+1]._time)-sifPlayer._secsToMillis(e[n]._time),
e[n].bool._value!==e[n+1].bool._value?i.to({value:e[n+1].bool._value},k,l):i.wait(k);j.addTween(i)}else e.bool||alert(JSON.stringify(e)+"param_type : bool param_name : "+g+" layer type : "+this.type),d[g].value=e.bool._value;f.convert._set(h,d[g],b,"bool")},_setConvert:function(h,g,b,d){h=sifPlayer.param.bool;b===d?(g.getValue=h.getValue,g.setValue=h.setValue):"and"===d&&(g.getValue=h.getAnd)},setValue:function(h){this.value=h},getValue:function(){return this.value},getAnd:function(){return this.link1&&
this.link2}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){var h={_get:function(g,b,d,e,f){var h=sifPlayer.param,k=h._set,j="composite";e[b]={};e[b]._type=j;e[b].composite={};if("vector"===f.composite._type)f[j]._x&&(f[j].x=g.sifobj.sif.canvas.defs[f[j]._x]),f[j]._y&&(f[j].y=g.sifobj.sif.canvas.defs[f[j]._y]),k(g,"x","real",e[b].composite,f.composite.x),k(g,"y","real",e[b].composite,f.composite.y),h.convert._set(g,e[b],d,j);else if("bline_point"===f.composite._type){var l=e[b].composite,j=f.composite._type;f.composite._point&&(f.composite.point=
g.sifobj.sif.canvas.defs[f.composite._point]);k(g,"point","vector",l,f.composite.point);k(g,"width","real",l,f.composite.width);k(g,"origin","real",l,f.composite.origin);k(g,"split","bool",l,f.composite.split);k(g,"t1","vector",l,f.composite.t1);k(g,"t2","vector",l,f.composite.t2);h.convert._set(g,e[b].composite,d,j,f.composite.point.animated||f.composite.width.animated||f.composite.origin.animated||f.composite.t1.animated||f.composite.t2.animated)}},_setConvert:function(g,b,d,e){"bline_point"===
e?(b.getPoint=h.getPoint,b.getT1=h.bline_point_getT1,b.getT2=h.bline_point_getT2):alert("new type of point")},getPoint:function(){return this.point},bline_point_getPoint:function(){return this.point},bline_point_getT1:function(){return{x:this.t1.getX()/3,y:this.t1.getY()/3}},bline_point_getT2:function(){return{x:this.t2.getX()/3,y:this.t2.getY()/3}}};sifPlayer.param.composite=h})();this.sifPlayer.param=this.sifPlayer.param||{};this.sifPlayer.param.convert=this.sifPlayer.param.convert||{};(function(){sifPlayer.param.convert._set=function(h,g,b,d){"vector"===b?sifPlayer.param[b]._setConvert(h,g,b,d):"real"===b?sifPlayer.param[b]._setConvert(h,g,b,d):"integer"===b?sifPlayer.param[b]._setConvert(h,g,b,d):"angle"===b?sifPlayer.param[b]._setConvert(h,g,b,d):"bool"===b?sifPlayer.param[b]._setConvert(h,g,b,d):"composite"===b&&sifPlayer.param[b]._setConvert(h,g,b,d)}})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Shape;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this._getBline(b.bline);d(this,"blend_method","integer",this,b.blend_method);d(this,"amount","real",this,b.amount);d(this,"origin","vector",this,b.origin);d(this.bline,"color","color",this,b.color);b.width&&d(this.bline,"width","real",this,b.width);sifPlayer._addToDesc(this,b);this.entries=
this.collectEntries();this.makeShape();this.aabb=sifPlayer.aabbFromEntries(this.entries,this.width?this.width.getValue():null);this.updateValues()};g._getBline=function(b){var d=sifPlayer.param._set;this.bline={};this.bline.sifobj=this.sifobj;this.bline.timeline=new createjs.Timeline;this.bline.timeline.setPaused(!0);this.bline.entry=[];this.bline.loop=b.bline._loop;for(var e=0,f=b.bline.entry.length;e<f;e++){var g={};d(this.bline,"composite","composite",g,b.bline.entry[e]);this.bline.entry.push(g.composite)}};
g.collectEntries=function(){var b=[],d,e;d=this.bline.entry[0].composite.getPoint();b.push([d.getX(),d.getY()]);for(var f=0,g=this.bline.entry.length-1;f!==g;f++)d=this.bline.entry[f].composite,e=this.bline.entry[f+1].composite,d.split.getValue()?b.push(this._bezierEntry(d.getPoint(),e.getPoint(),d.getT2(),e.getT1())):b.push(this._bezierEntry(d.getPoint(),e.getPoint(),d.getT1(),e.getT1()));this.bline.loop&&(d=this.bline.entry[this.bline.entry.length-1].composite,e=this.bline.entry[0].composite,d.split.getValue()?
b.push(this._bezierEntry(d.getPoint(),e.getPoint(),d.getT2(),e.getT1())):b.push(this._bezierEntry(d.getPoint(),e.getPoint(),d.getT1(),e.getT1())));return b};g._bezierEntry=function(b,d,e,f){var g;g=e.x+b.getX();b=e.y+b.getY();e=-f.x+d.getX();f=-f.y+d.getY();return[g,b,e,f,d.getX(),d.getY()]};g.makeShape=function(){var b=this.entries,d=this.graphics;d.clear();d.f(createjs.Graphics.getRGB(Math.round(256*this.color.r),Math.round(256*this.color.g),Math.round(256*this.color.b),this.color.a));d.mt(b[0][0],
b[0][1]);for(var e=1,f=b.length;e!==f;e++)d.bt(b[e][0],b[e][1],b[e][2],b[e][3],b[e][4],b[e][5]);d.ef()};g.setPosition=function(b){this.timeline.setPosition(b);this.bline.timeline.setPosition(b);this.animated=!1;this.updateShape();this.updateValues();return b};g.updateShape=function(){var b,d=Math.abs(sifPlayer.easelSif.getTotalScale(this)),e=this.width?this.width.getValue():null;this.checkBline();if(this.bline.animated||!this.cacheID)b=this.collectEntries(),this.cacheID&&this.uncache(),this.entries=
b,this.aabb=sifPlayer.aabbFromEntries(b,e),this.makeShape();b=this.aabb;this.cacheID||(this.animated=!0,this.scale=d,this.setBounds(b[0],b[1],b[2]-b[0],b[3]-b[1]))};g.compareEntries=function(b){var d=this.entries;if(this.entries){if(d[0][0]!==b[0][0]||d[0][1]!==b[0][1])return!1;for(var e=1,f=d.length;e<f;e++)if(d[e][0]!==b[e][0]||d[e][1]!==b[e][1]||d[e][2]!==b[e][2]||d[e][3]!==b[e][3]||d[e][4]!==b[e][4]||d[e][5]!==b[e][5])return!1}else return!1;return!0};g.updateValues=function(){this.x=this.origin.getX();
this.y=this.origin.getY();this.alpha=this.amount.getValue();this.compositeOperation=sifPlayer.easelSif._getBlend(this.blend_method.getValue())};g.checkBline=function(){this.bline.animated=!1;this.bline.timeline._tweens&&(this.bline.animated=!0)};sifPlayer.easelSif.region=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Container;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;d(this,"amount","real",this,b.amount);d(this,"blend_method","integer",this,b.blend_method);d(this,"origin","vector",this,b.origin);this.transformation={};var e=b.transformation.composite;e&&(d(this,"offset","vector",this.transformation,
e.offset),d(this,"angle","angle",this.transformation,e.angle),d(this,"skew_angle","angle",this.transformation,e.skew_angle),d(this,"scale","vector",this.transformation,e.scale),d(this,"skew_angle","angle",this.transformation,e.skew_angle),this.updateContext=h.updateContextComposite);if(e=b.transformation.bone_link){this.bone=e.bone[0].bone_valuenode._guid;var e=b.transformation.bone_link.base_value.composite,f={};d(this,"offset","vector",f,e.offset);d(this,"angle","angle",f,e.angle);d(this,"skew_angle",
"vector",f,e.skew_angle);d(this,"scale","vector",f,e.scale);this.base_value=f;this.updateContext=h.updateContextBone}sifPlayer._addToDesc(this,b);b.canvas&&(b.canvas.canvas?this._getLayers(b.canvas.canvas.layer):this._getLayers(this.sifobj.sif.canvas.defs[b.canvas._use].canvas.layer))};g._getLayers=sifPlayer.easelSif.SifObject.prototype._getLayers;g.moveChildrenTo=sifPlayer.easelSif.SifObject.prototype.moveChildrenTo;g.setPosition=function(b,d){this.animated=this.childAnimated=!1;var e;this.timeline.setPosition(b);
e=this.timeline.position;for(var f=this.children,g=0,h=f.length;g<h;g++)e=f[g].unsynced?f[g].setPosition(f[g].timeline.position+d,d):f[g].setPosition(e,d),f[g].animated&&(this.childAnimated=this.animated=!0);this.childAnimated&&"group"===this.type&&(this.uncache(),e=Math.abs(sifPlayer.easelSif.getTotalScale(this)),f=this.getBounds(),console.log(f),f&&this.cache(f.x,f.y,f.width,f.height,e));return b};h.updateContextComposite=function(b){var d=this.transformation,e=this.origin.getX()+d.offset.getX(),
f=this.origin.getY()+d.offset.getY(),g=d.scale.getX(),h=d.scale.getY(),j=d.skew_angle.getValue(),l=0;j%360&&(l=Math.tan(j*createjs.Matrix2D.DEG_TO_RAD));new createjs.Matrix2D(1,l,0,1,0,0);new createjs.Matrix2D(1,0,l,1,0,0);d=d.angle.getValue();e=this._matrix.identity().appendTransform(e,f,g,h,d,0,0,0,0);e.skew(l,l);b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)};h.updateContextBone=function(b){var d=this.base_value,e=this._matrix.copy(this.sifobj.sif.bones.guid[this.bone]._m);e.appendTransform(d.offset.getX(),
d.offset.getY(),d.scale.getX(),d.scale.getY(),d.angle.getValue(),0,0,0,0);b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)};sifPlayer.easelSif.group=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Shape;g.init=sifPlayer.easelSif.region.prototype.init;g._getBline=sifPlayer.easelSif.region.prototype._getBline;g.collectEntries=sifPlayer.easelSif.region.prototype.collectEntries;g.compareEntries=sifPlayer.easelSif.region.prototype.compareEntries;g._bezierEntry=sifPlayer.easelSif.region.prototype._bezierEntry;g.setPosition=sifPlayer.easelSif.region.prototype.setPosition;g.updateShape=sifPlayer.easelSif.region.prototype.updateShape;
g.updateValuesRegion=sifPlayer.easelSif.region.prototype.updateValues;g.checkBline=sifPlayer.easelSif.region.prototype.checkBline;g.updateValues=function(){this.updateValuesRegion()};g.makeShape=function(){var b=this.entries,d=this.graphics;d.clear();d.setStrokeStyle(this.width.getValue());d.s(createjs.Graphics.getRGB(Math.round(256*this.color.r),Math.round(256*this.color.g),Math.round(256*this.color.b),this.color.a));d.mt(b[0][0],b[0][1]);for(var e=1,f=b.length;e!==f;e++)d.bt(b[e][0],b[e][1],b[e][2],
b[e][3],b[e][4],b[e][5]);d.es()};sifPlayer.easelSif.outline=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Shape;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;d(this,"amount","real",this,b.amount);d(this,"origin","vector",this,b.origin);d(this,"radius","real",this,b.radius);d(this,"blend_method","integer",this,b.blend_method);d(this,"color","color",this,b.color);sifPlayer._addToDesc(this,
b);this.makeShape()};g.makeShape=function(){var b=this.graphics;this.rad=this.radius.getValue();this.r=this.color.r;this.g=this.color.g;this.b=this.color.b;this.a=this.color.a;b.f(createjs.Graphics.getRGB(Math.round(256*this.r),Math.round(256*this.g),Math.round(256*this.b),this.a));b.dc(0,0,this.rad);b.ef()};g.setPosition=function(b){this.timeline.setPosition(b);return b};g.updateContext=function(b){this.x=this.origin.getX();this.y=this.origin.getY();this.alpha=this.amount.getValue();var d=this._matrix.identity().appendTransform(this.origin.getX(),
this.origin.getY(),1,1,0,0,0,0,0);b.transform(d.a,d.b,d.c,d.d,d.tx,d.ty);b.globalAlpha*=this.amount.getValue();b.globalCompositeOperation=sifPlayer.easelSif._getBlend(this.blend_method.getValue())};sifPlayer.easelSif.circle=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Bitmap;g.init=function(b){var d=sifPlayer.param._set;this.initialize(this.sifobj.sifPath+b.filename.string);this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);d(this,"amount","real",this,b.amount);d(this,"blend_method","integer",this,b.blend_method);d(this,"tl","vector",this,b.tl);d(this,"br","vector",this,b.br);sifPlayer._addToDesc(this,b)};g.setPosition=function(b){this.timeline.setPosition(b);return b};
g.updateContext=function(b){var d=this.br.getX(),e=this.br.getY(),f=this.tl.getX(),g=this.tl.getY(),h,j;if(d!==this.brx||e!==this.bry||f!==this.tlx||g!==this.tly)this.brx=d,this.bry=e,this.tlx=f,this.tly=g,d-=f,e=g-e,0>=d?(h=-1,d*=-1):h=1,0>=e?(j=1,e*=-1):j=-1,this.x=f,this.y=g,this.scaleX=h/this.image.width*d,this.scaleY=j/this.image.height*e;f=this._matrix.identity().appendTransform(f,g,h,j,0,0,0,0,0);b.transform(f.a,f.b,f.c,f.d,f.tx,f.ty);b.globalAlpha*=this.amount.getValue();b.globalCompositeOperation=
sifPlayer.easelSif._getBlend(this.blend_method.getValue())};sifPlayer.easelSif.Import=h})();(function(){function h(b,d){this.init(b,d)}var g=h.prototype;g.init=function(b,d){var e=sifPlayer.param._set;this.initLayer(b,d);e(this,"amount","real",this,d.amount);e(this,"blend_method","integer",this,d.blend_method);e(this,"p1","vector",this,d.p1);e(this,"p2","vector",this,d.p2);e(this,"gradient","gradient",this,d.gradient)};g.draw=function(b){for(var b=b.ctx,d=b.createLinearGradient(this.p1.getX(),this.p1.getY(),this.p2.getX(),this.p2.getY()),e=this.gradient.color,f=0,g=e.length;f<g;f++)d.addColorStop(e[f].pos,
"rgba("+Math.round(256*e[f].r)+", "+Math.round(256*e[f].g)+", "+Math.round(256*e[f].b)+", "+e[f].a+")");b.globalAlpha=this.amount.getValue();b.globalCompositeOperation=this._getBlend();b.fillStyle=d;b.fillRect(-1E3,-1E3,2E3,2E3)};sifPlayer.easelSif.linear_gradient=h})();(function(){function h(b,d){this.init(b,d)}var g=h.prototype;g.init=function(b,d){var e=sifPlayer.param._set;this.initLayer(b,d);e(this,"amount","real",this,d.amount);e(this,"blend_method","integer",this,d.blend_method);e(this,"center","vector",this,d.center);e(this,"radius","real",this,d.radius);e(this,"gradient","gradient",this,d.gradient)};g.draw=function(b){for(var b=b.ctx,d=this.center.getX(),e=this.center.getY(),d=b.createRadialGradient(d,e,0,d,e,this.radius.getValue()),e=this.gradient.color,
f=0,g=e.length;f<g;f++)d.addColorStop(e[f].pos,"rgba("+Math.round(256*e[f].r)+", "+Math.round(256*e[f].g)+", "+Math.round(256*e[f].b)+", "+e[f].a+")");b.globalAlpha=this.amount.getValue();b.globalCompositeOperation=this._getBlend();b.fillStyle=d;b.fillRect(-1E3,-1E3,2E3,2E3)};sifPlayer.easelSif.radial_gradient=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Container;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);d(this,"origin","vector",this,b.origin);d(this,"amount","angle",this,b.amount);sifPlayer._addToDesc(this,b)};g.setPosition=sifPlayer.easelSif.group.prototype.setPosition;g.updateContext=function(b){var d=this.origin.getX(),e=
this.origin.getY(),f=this.amount.getValue(),d=this._matrix.identity().appendTransform(d,e,1,1,f,0,0,d,d);b.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)};sifPlayer.easelSif.rotate=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Container;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;d(this,"amount","vector",this,b.amount);d(this,"center","vector",this,b.center);sifPlayer._addToDesc(this,b)};g.setPosition=sifPlayer.easelSif.group.prototype.setPosition;g.updateContext=function(b){var d=this.center.getX(),
e=this.center.getY(),f=this.amount.getX(),g=this.amount.getY(),d=this._matrix.identity().appendTransform(d,e,f,g,0,0,0,d,d);b.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)};sifPlayer.easelSif.stretch=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Container;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.duration=this.sifobj.timeline.duration;this.timeline.setPaused(!0);d(this,"origin","vector",this,b.origin);sifPlayer._addToDesc(this,b)};g.setPosition=sifPlayer.easelSif.group.prototype.setPosition;g.updateContext=function(b){var d=this.origin.getX(),e=this.origin.getY(),d=this._matrix.identity().appendTransform(d,
e,1,1,0,0,0,0,0);b.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)};sifPlayer.easelSif.translate=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Container;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;d(this,"center","vector",this,b.center);d(this,"amount","real",this,b.amount);sifPlayer._addToDesc(this,b)};g.setPosition=sifPlayer.easelSif.rotate.prototype.setPosition;g.updateContext=function(b){var d=this.center.getX(),e=
this.center.getY(),f=Math.exp(this.amount.getValue()),d=this._matrix.identity().appendTransform(d,e,f,f,0,0,0,d/f,d/f);b.transform(d.a,d.b,d.c,d.d,d.tx,d.ty)};sifPlayer.easelSif.zoom=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.DisplayObject;g.init=function(b){var d=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;d(this,"link_time","integer",this,b.link_time);d(this,"local_time","integer",this,b.local_time);d(this,"duration","integer",this,b.duration);sifPlayer._addToDesc(this,b)};g.setPosition=function(b){this.timeline.tick(b-this.timeline.position);
var d=this.duration.getValue(),e=this.link_time.getValue(),f=this.local_time.getValue(),b=(b+f)%d;return 0!=d?0<d?b+e:e-b:e};sifPlayer.easelSif.timeloop=h})();(function(){function h(b,d){this.sifobj=b;this.init(d)}var g=h.prototype=new createjs.Shape;g.init=function(b){var d=sifPlayer.param._set;this.initialize();d(this,"amount","real",this,b.amount);this._getBones(b.bones);sifPlayer._addToDesc(this,b)};g._getBones=function(b){for(var d=[],b=b.static_list.entry,e=0,f=b.length;e<f;e++)d[e]=b[e].bone[0]._guid;this.bones=d};g.setPosition=function(b){for(var d=this.sifobj.sif.bones.guid,e=this.bones,f=e.length-1;0<=f;f--)d[e[f]].setPosition(b);return b};sifPlayer.easelSif.skeleton=
h})();(function(){sifPlayer.helper={loadXML:function(h){var g=new XMLHttpRequest;g.open("GET",h,!1);g.send();return g.responseXML},StringtoXML:function(h){return(new DOMParser).parseFromString(h,"text/xml")},setCanvasToWindowSize:function(h,g,b){g/=b;b=window.innerWidth/window.innerHeight;1<=g?g>=b?(h.width=window.innerWidth,h.height=h.width/g):(h.height=window.innerHeight,h.width=window.innerHeight*g):g<=b?(h.height=window.innerHeight,h.width=h.height*g):(h.width=window.innerWidth,h.height=h.width/g)}}})();(function(){sifPlayer.img={getCanvasArray:function(h){var g=h.sifobj,h=h.fps,b=1E3/h,d=0,e=Math.round(g.sif.canvas.end_time/1E3*h),f=[];f.sifReady=0;(function(){var h=document.createElement("canvas");h.height=g.height;h.width=g.width;var k=h.getContext("2d");g.setPosition(b*d);g.draw();k.drawImage(g.dCanvas,0,0);f[d]=h;d+=1;d<=e&&(f.sifReady=d/e,setTimeout(arguments.callee,0))})();return f},playSif:function(h,g,b){var d=new XMLHttpRequest;d.open("GET",h,!1);d.send();var h=d.responseXML,e=document.getElementById(g),
f=e.getContext("2d"),i=new sifPlayer.SifObject(h,{sifPath:"assets/"});i.width=e.width;i.height=e.height;var g=Math.round(i.sif.canvas.end_time/b),k=sifPlayer.img.getCanvasArray({sifobj:i,fps:b,start_frame:0,end_frame:g}),j=0;setInterval(function(){e.height=0;e.height=i.height;e.width=i.width;1>k.sifReady?(f.globalAlpha=k.sifReady,f.drawImage(k[0],0,0),f.font="30px Arial",f.globalAlpha=1,f.fillStyle="rgb(255, 255, 255)",f.strokeStyle="rgb(0, 0, 0)",f.textAlign="center",f.fillText("Rendering..",e.width/
2,e.height/2),f.fillText(Math.round(100*k.sifReady)+"%",e.width/2,e.height/2+30),j=0):f.drawImage(k[j],0,0);j=j<k.length-1?j+1:0},1E3/b)}}})();
