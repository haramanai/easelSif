/*
 Copyright (c) 2012 haramanai.
 sifPlayer easelSif
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
*/
this.sifPlayer=this.sifPlayer||{};
(function(){sifPlayer._getData=function(g){function d(e,f){b[e]?(b[e].constructor!=Array&&(b[e]=[b[e]]),b[e][b[e].length]=f):b[e]=f}var b={},e,f,h;for(e=0;f=g.attributes[e];e++)d("_"+f.name,sifPlayer._toSifValue(f.value));for(e=0;f=g.childNodes[e];e++)if(1==f.nodeType)if(h=f.nodeName,1==f.childNodes.length&&3==f.firstChild.nodeType)d(f.nodeName,sifPlayer._toSifValue(f.firstChild.nodeValue));else switch(h){case "param":b[f.getAttribute("name")]=sifPlayer._getData(f);break;case "layer":"undefined"==
typeof b[h]&&(b[h]=[]);switch(f.getAttribute("type")){case "rotate":case "translate":case "zoom":case "stretch":d("layer",{_type:"restore"});b.layer.unshift(sifPlayer._getData(f));break;case "timeloop":b.layer.unshift(sifPlayer._getData(f));break;default:d(f.nodeName,sifPlayer._getData(f))}break;case "waypoint":"undefined"==typeof b[h]&&(b[h]=[]);default:d(h,sifPlayer._getData(f))}return b};sifPlayer._secsToMillis=function(g){return 1E3*parseFloat(g.replace("s",""))};sifPlayer._canvasTimeToMillis=
function(g,d){var b=0,e;0<g.search("h")&&(e=g.split("h"),b+=36E5*e[0],g=e[1]);0<g.search("m")&&(e=g.split("m"),b+=6E4*e[0],g=e[1]);0<g.search("s")&&(e=g.split("s"),b+=1E3*e[0],g=e[1]);0<g.search("f")&&(e=g.split("f"),b+=1E3*e[0]/d);return b};sifPlayer._toSifValue=function(g){var d=Number(g);return!isNaN(d)?d:"true"===g?!0:"false"===g?!1:":"===g[0]?g.substr(1):g};sifPlayer._getEase=function(g){return"linear"===g||"clamped"===g||"halt"===g?createjs.Ease.none:"constant"===g?sifPlayer.Ease.constant:"auto"===
g?createjs.Ease.none:!1};sifPlayer.aabbFromEntries=function(g,d){for(var b=[g[0][0],g[0][1],g[0][0],g[0][1]],e=0,f=g.length;e<f;e++)g[e][0]<b[0]?b[0]=g[e][0]:g[e][0]>b[2]&&(b[2]=g[e][0]),g[e][2]<b[0]?b[0]=g[e][2]:g[e][2]>b[2]&&(b[2]=g[e][2]),g[e][4]<b[0]?b[0]=g[e][4]:g[e][4]>b[2]&&(b[2]=g[e][4]),g[e][1]<b[1]?b[1]=g[e][1]:g[e][1]>b[3]&&(b[3]=g[e][1]),g[e][3]<b[1]?b[1]=g[e][3]:g[e][3]>b[3]&&(b[3]=g[e][3]),g[e][5]<b[1]?b[1]=g[e][5]:g[e][5]>b[3]&&(b[3]=g[e][5]),d&&(b[0]-=d,b[1]-=d,b[2]+=d,b[3]+=d);return b};
sifPlayer._addToDesc=function(g,d){d._desc&&(g.name=d._desc,g.sifobj.desc[g.name]=g)};sifPlayer._checkTimeline=function(g){var g=g._tweens,d=!1;if(g)for(var b=0,e=g.length;b<e;b++)sifPlayer._checkTween(g[b])&&(d=!0);return d};sifPlayer._checkTween=function(g){var d=g._curQueueProps,g=g._target,b=g.preprops?g.preprops:{},e=!1,f;for(f in d)g[f]!==b[f]&&(e=!0),b[f]=g[f];g.preprops=b;return e};window.sifPlayer=sifPlayer})();(function(){sifPlayer.easelSif={getTotalScale:function(g){for(var d=1,b=1;null!=g;)d*=g.scaleX,b*=g.scaleY,g=g.parent;return Math.sqrt(d*d+b*b)},_getLayer:function(g,d){var b;if(sifPlayer.easelSif[d._type])return b=new sifPlayer.easelSif[d._type],b.init(g,d),b;if("import"===d._type)return b=new sifPlayer.easelSif.Import,b.init(g,d),b;if("switch"===d._type)return b=new sifPlayer.easelSif.Switch,b.init(g,d),b;console.log("EERRROOR  "+d._type+" layer it's not supported")},_setTimeline:function(g){g.timeline=
new createjs.Timeline;g.timeline.setPaused(!0)},_getBlend:function(g){switch(g){case 0:return"source-over";case 1:return"copy";case 13:return"source-atop";case 21:return"source-in";case 12:return"destination-over";case 19:return"destination-out";case 14:return"destination-in";default:return"source-over"}}}})();(function(){Ease={constant:function(g){return 1>g?0:1},bool:function(g){return 1>g?1:0}};sifPlayer.Ease=Ease})();this.sifPlayer=this.sifPlayer||{};
(function(){function g(b,e){this.init(b,e)}var d=g.prototype;d.init=function(b,e){var f=sifPlayer.param._set;this.name=e.name.string;this.parent=e.parent.bone_valuenode._guid;this.sifobj=b;this.timeline=new createjs.Timeline;this.guid=e._guid;f(this,"origin","vector",this,e.origin);f(this,"angle","angle",this,e.angle);f(this,"scalelx","real",this,e.scalelx);f(this,"width","real",this,e.width);f(this,"scalex","real",this,e.scalex);f(this,"tipwidth","real",this,e.tipwidth);f(this,"length","real",this,
e.length);this._m=new createjs.Matrix2D;this._lm=new createjs.Matrix2D};d.setMatrix=function(){var b=this.sifobj.sif.bones.guid[this.parent],e=this.origin.getX(),f=this.origin.getY(),h=this.scalelx.getValue(),d=this.scalex.getValue(),g=this.angle.getValue();this.length.getValue();var k=1;b?(this._m.copy(b._lm),k=b.scalelx.getValue(),a=b.angle.getValue()):this._m.identity();this._lm.copy(this._m);this._m.appendTransform(e*k,f,h*d,1,g,0,0,0,0);this._lm.appendTransform(e*k,f,d,1,g,0,0,0,0)};d.getParentScale=
function(){var b=this.sifobj.sif.bones.guid[this.parent],e=new createjs.Point(0,0);b&&(e.x=b._m.a,e.y=b._m.d);return e};d.setPosition=function(b){this.timeline.setPosition(b);this.setMatrix();return b};sifPlayer.Bone=g})();(function(){function g(b,e){if(e)for(c in e)this[c]=e[c];this.timeline=new createjs.Timeline;b&&(this.sifPath=b.slice(0,b.lastIndexOf("/")+1),this.preload=new createjs.LoadQueue(!0),this.preload.on("fileload",g.handleFileLoad,this),this.preload.on("complete",g.handleComplete,this),this.preload.loadFile({id:"sifobj",src:b,type:createjs.LoadQueue.XML}))}var d=g.prototype=new createjs.Container;d.sifPath="";d.timeline=null;d.desc={};d._getData=function(b){function e(b,e){f[b]?(f[b].constructor!=Array&&
(f[b]=[f[b]]),f[b][f[b].length]=e):f[b]=e}var f={},h,d,g;for(h=0;d=b.attributes[h];h++)e("_"+d.name,sifPlayer._toSifValue(d.value));for(h=0;d=b.childNodes[h];h++)if(1==d.nodeType)if(g=d.nodeName,1==d.childNodes.length&&3==d.firstChild.nodeType)e(d.nodeName,sifPlayer._toSifValue(d.firstChild.nodeValue));else switch(g){case "param":f[d.getAttribute("name")]=this._getData(d);break;case "layer":"undefined"==typeof f[g]&&(f[g]=[]);switch(d.getAttribute("type")){case "rotate":case "translate":case "zoom":case "stretch":e(d.nodeName,
this._getData(d));break;case "timeloop":f.layer.unshift(this._getData(d));break;default:e(d.nodeName,this._getData(d))}break;case "waypoint":case "entry":case "bone_root":case "bone":"undefined"==typeof f[g]&&(f[g]=[]);default:e(g,this._getData(d))}return f};d.init=function(b){this.initialize();this.sifobj=this;b=this._getData(b.getElementsByTagName("canvas")[0]);this.timeline.setPaused(!0);this._getCanvasData(b)};d.getFiles=function(b){for(var b=b.getElementsByTagName("param"),e=0,f=b.length;e<f;e++){var h=
b[e].getAttribute("name");if("filename"===h)h=this.sifPath+b[e].getElementsByTagName("string")[0].childNodes[0].nodeValue,this.preload.getItem(h)||this.preload.loadFile({src:h});else if("canvas"===h&&(h=b[e].getAttribute("use"))&&0<h.search("#"))h=this.sifPath+h.slice(0,h.length-1),this.preload.getItem(h)||this.preload.loadFile({src:h,type:createjs.LoadQueue.XML})}};g.handleFileLoad=function(b){b.item.type===createjs.LoadQueue.XML&&this.getFiles(b.result)};g.handleComplete=function(){this.removeAllChildren();
this.init(this.preload.getResult("sifobj"));this.tick=function(){this.setPosition(0);this.tick=this.tickReady}};d._getCanvasData=function(b){this.sif={};this.sif.canvas={};this.sif.canvas.version=b._version;this.sif.canvas.width=b._width;this.sif.canvas.height=b._height;var e=b["_view-box"].split(" ");this.sif.canvas.view_box=[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];this.sif.canvas.antialias=b._antialias;this.sif.canvas.fps=b._fps;this.sif.canvas.begin_time=sifPlayer._canvasTimeToMillis(b["_begin-time"],
this.sif.canvas.fps);this.sif.canvas.end_time=sifPlayer._canvasTimeToMillis(b["_end-time"],this.sif.canvas.fps);e=b._bgcolor.split(" ");this.sif.canvas.bgcolor={};this.sif.canvas.bgcolor.r=Math.round(256*parseFloat(e[0]));this.sif.canvas.bgcolor.g=Math.round(256*parseFloat(e[1]));this.sif.canvas.bgcolor.b=Math.round(256*parseFloat(e[2]));this.sif.canvas.bgcolor.a=parseFloat(e[3]);this.sif.canvas.name=b.name;this.sif.canvas.defs=this._getDefs(b.defs);this._getBones(b);this.timeline.duration=this.sif.canvas.end_time;
this.scaleX=this.width/(this.sif.canvas.view_box[2]-this.sif.canvas.view_box[0]);this.scaleY=this.height/(this.sif.canvas.view_box[3]-this.sif.canvas.view_box[1]);this.x=this.width/2;this.y=this.height/2;this._getLayers(b.layer)};d._getDefs=function(b){var e={};for(name in b)if(b[name].constructor!=Array)"animated"===name?(e[b[name]._id]={},e[b[name]._id].animated=b[name]):(e[b[name]._id]={},e[b[name]._id][name]=b[name],e[b[name]._id]._type=name);else for(var f=0;f<b[name].length;f++)"animated"===
name?(e[b[name][f]._id]={},e[b[name][f]._id].animated=b[name][f]):(e[b[name][f]._id]={},e[b[name][f]._id][name]=b[name][f],e[b[name][f]._id]._type=name);return e};d._getBones=function(b){if(b=b.bones){this.sif.bones={};for(var e=this.sif.bones.guid={},f=0,h=b.bone.length;f<h;f++)e[b.bone[f]._guid]=new sifPlayer.Bone(this,b.bone[f])}};d._getLayers=function(b){var e=this.sifobj,f,h;if(b)for(var d=0,g=b.length;d<g;d++)f=b[d]._type,h=sifPlayer.easelSif._getLayer(e,b[d]),("rotate"===f||"translate"===f||
"stretch"===f||"zoom"===f)&&this.moveChildrenTo(h),this.addChild(h)};d.moveChildrenTo=function(b){for(var e=[],f=0,h=this.children.length;f<h;f++)e.push(this.children[f]);f=0;for(h=e.length;f<h;f++)b.addChild(e[f])};d.tickReady=function(b){this.animated=!1;this.timeline.tick(b);for(var e=this.timeline.position,f=this.children,h=0,d=this.children.length;h<d;h++)e=f[h].unsynced?f[h].setPosition(f[h].timeline.position+b,b):f[h].setPosition(e,b),f[h].animated&&(this.childAnimated=this.animated=!0)};d.tick=
function(){};d.setPosition=function(b){this.timeline.setPosition(b);for(var b=this.timeline.position,e=0,f=this.children.length;e<f;e++)b=this.children[e].setPosition(b)};sifPlayer.easelSif.SifObject=g})();this.sifPlayer=this.sifPlayer||{};this.sifPlayer.param=this.sifPlayer.param||{};
(function(){var g=sifPlayer.param;g._set=function(d,b,e,f,h){var i;h||alert(JSON.stringify(h)+this.type+"  "+b);h.animated&&(i=h.animated._type);h._type&&(i=h._type);h._use?g._set(d,b,e,f,d.sifobj.sif.canvas.defs[h._use]):h.vector||"vector"===i?g.vector._get(d,b,e,f,h):h.integer||"integer"===i?g._getNumber(d,b,e,f,h,"integer"):h.real||"real"===i?g._getNumber(d,b,e,f,h,"real"):h.angle||"angle"===i?g._getNumber(d,b,e,f,h,"angle"):h.bool||"bool"===i?g.bool._get(d,b,e,f,h):h.time||"time"===i?g._getTime(d,
b,e,f,h):h.color||"color"===i?g._getColor(d,b,e,f,h):h.gradient||"gradient"===i?g._getGradient(d,b,e,f,h):h.composite?g.composite._get(d,b,e,f,h):h.bline_point?(f[b]={},f[b].composite={},h.bline_point.vertex?(g._set(d,"point","vector",f[b].composite,h.bline_point.vertex),g._set(d,"t1","vector",f[b].composite,h.bline_point.t1),f[b].composite.split={},f[b].composite.split.getValue=function(){return!1},g.convert._set(d,f[b].composite,e,"bline_point")):alert("not converted bline point")):h.scale||"scale"===
i?(f[b]={},f[b].scale={},h.scale._link&&(h.scale.link=d.sifobj.sif.canvas.defs[h.scale._link]),h.scale._scalar&&(h.scale.scalar=d.sifobj.sif.canvas.defs[h.scale._scalar]),g._set(d,"link",h.scale._type,f[b].scale,h.scale.link),g._set(d,"scalar","real",f[b].scale,h.scale.scalar),g.convert._set(d,f[b],e,"scale")):h.radial_composite||"radial_composite"===i?g._getRadial_composite(d,b,e,f,h):h.add?(i=h.add._type,f[b]={},f[b].add={},h.add._lhs&&(h.add.lhs=d.sifobj.sif.canvas.defs[h.add._lhs]),h.add._rhs&&
(h.add.rhs=d.sifobj.sif.canvas.defs[h.add._rhs]),h.add._scaler&&(h.add.scaler=d.sifobj.sif.canvas.defs[h.add._scaler]),g._set(d,"lhs",i,f[b].add,h.add.lhs),g._set(d,"rhs",i,f[b].add,h.add.rhs),g._set(d,"scalar","real",f[b].add,h.add.scalar),g.convert._set(d,f[b],e,"add")):h.and?(i=h.and._type,f[b]={},f[b].and={},g._set(d,"link1",i,f[b].and,h.and.link1),g._set(d,"link2",i,f[b].and,h.and.link2),g.convert._set(d,f[b],e,"and")):h.atan2?(i=h.atan2._type,f[b]={},f[b].atan2={},h.atan2._x&&(h.atan2.x=d.sifobj.sif.canvas.defs[h.atan2._x]),
h.atan2._y&&(h.atan2.y=d.sifobj.sif.canvas.defs[h.atan2._y]),g._set(d,"x","real",f[b].atan2,h.atan2.x),g._set(d,"y","real",f[b].atan2,h.atan2.y),g.convert._set(d,f[b],e,"atan2")):h.cos?(i=h.cos._type,f[b]={},f[b].cos={},h.cos._angle&&(h.cos.angle=d.sifobj.sif.canvas.defs[h.cos._angle]),h.cos._amp&&(h.cos.amp=d.sifobj.sif.canvas.defs[h.cos._amp]),g._set(d,"angle","angle",f[b].cos,h.cos.angle),g._set(d,"amp","real",f[b].cos,h.cos.amp),g.convert._set(d,f[b],e,"cos")):h.dotproduct?(i=h.dotproduct._type,
f[b]={},f[b].dotproduct={},h.dotproduct._lhs&&(h.dotproduct.lhs=d.sifobj.sif.canvas.defs[h.dotproduct._lhs]),h.dotproduct._rhs&&(h.dotproduct.rhs=d.sifobj.sif.canvas.defs[h.dotproduct._rhs]),g._set(d,"lhs","vector",f[b].dotproduct,h.dotproduct.lhs),g._set(d,"rhs","vector",f[b].dotproduct,h.dotproduct.rhs),g.convert._set(d,f[b],e,"dotproduct")):h.exp?(i=h.exp._type,f[b]={},f[b].exp={},h.exp._exp&&(h.exp.exp=d.sifobj.sif.canvas.defs[h.exp._exp]),h.exp._scale&&(h.exp.scale=d.sifobj.sif.canvas.defs[h.exp._scale]),
g._set(d,"exp","real",f[b].exp,h.exp.exp),g._set(d,"scale","real",f[b].exp,h.exp.scale),g.convert._set(d,f[b],e,"exp")):h.logarithm?(i=h.logarithm._type,f[b]={},f[b].logarithm={},h.logarithm._link&&(h.logarithm.link=d.sifobj.sif.canvas.defs[h.logarithm._link]),g._set(d,"link","real",f[b].logarithm,h.logarithm.link),g._set(d,"epsilon","real",f[b].logarithm,h.logarithm.epsilon),g._set(d,"infinite","real",f[b].logarithm,h.logarithm.infinite),g.convert._set(d,f[b],e,"logarithm")):h.reciprocal?(i=h.reciprocal._type,
f[b]={},f[b].reciprocal={},h.reciprocal._link&&(h.reciprocal.link=d.sifobj.sif.canvas.defs[h.reciprocal._link]),g._set(d,"link","real",f[b].reciprocal,h.reciprocal.link),g._set(d,"epsilon","real",f[b].reciprocal,h.reciprocal.epsilon),g._set(d,"infinite","real",f[b].reciprocal,h.reciprocal.infinite),g.convert._set(d,f[b],e,"reciprocal")):h.subtract?(i=h.subtract._type,f[b]={},f[b].subtract={},h.subtract._lhs&&(h.subtract.lhs=d.sifobj.sif.canvas.defs[h.subtract._lhs]),h.subtract._rhs&&(h.subtract.rhs=
d.sifobj.sif.canvas.defs[h.subtract._rhs]),h.subtract._scalar&&(h.subtract.scalar=d.sifobj.sif.canvas.defs[h.subtract._scalar]),g._set(d,"lhs",i,f[b].subtract,h.subtract.lhs),g._set(d,"rhs",i,f[b].subtract,h.subtract.rhs),g._set(d,"scalar","real",f[b].subtract,h.subtract.scalar),g.convert._set(d,f[b],e,"subtract")):h.sine?(i=h.sine._type,f[b]={},f[b].sine={},h.sine._angle&&(h.sine.angle=d.sifobj.sif.canvas.defs[h.sine._angle]),h.sine._amp&&(h.sine.amp=d.sifobj.sif.canvas.defs[h.sine._amp]),g._set(d,
"angle","angle",f[b].sine,h.sine.angle),g._set(d,"amp","real",f[b].sine,h.sine.amp),g.convert._set(d,f[b],e,"sine")):h.vectorangle?(i=h.vectorangle._type,f[b]={},f[b].vectorangle={},g._set(d,"vector","vector",f[b].vectorangle,h.vectorangle.vector),g.convert._set(d,f[b],e,"vectorangle")):h.greyed?g._set(d,b,e,f,h.greyed.link):(alert("no param type"),alert(JSON.stringify(h)+" layer type : "+d.type))};g._getNumber=function(d,b,e,f,h,i){var j,k;j={paused:!0,useTick:!0};var l=d.timeline,m,p=sifPlayer._secsToMillis;
f[b]={};if(h.animated){h=h.animated.waypoint;f[b].value=h[0][i]._value;j=createjs.Tween.get(f[b],j);"0s"!==h[0]._time&&(m=sifPlayer._getEase(h[0]._before),k=p(h[0]._time),j.to({value:h[0][i]._value},k,m));for(var n=0;n<h.length-1;n++)m=sifPlayer._getEase(h[n+1]._before),k=p(h[n+1]._time)-p(h[n]._time),j.to({value:h[n+1][i]._value},k,m);l.addTween(j)}else h[i]||alert(JSON.stringify(h)+"param_type : "+i+" param_name : "+b+" layer type : "+this.type),f[b].value=h[i]._value;g.convert._set(d,f[b],e,i)};
g._getTime=function(d,b,e,f,h){var i,j;i={paused:!0,useTick:!0};var k=d.timeline,l,m=sifPlayer._secsToMillis;f[b]={};if(h.animated){h=h.animated.waypoint;f[b].value=m(h[0].time._value);i=createjs.Tween.get(f[b],i);"0s"!==h[0]._time&&(l=sifPlayer._getEase(h[0]._before),j=m(h[0]._time),i.to({value:m(h[0].time._value)},j,l));for(var p=0;p<h.length-1;p++)l=sifPlayer._getEase(h[p+1]._before),j=m(h[p+1]._time)-m(h[p]._time),i.to({value:m(h[p+1].time._value)},j,l);k.addTween(i)}else h.time||alert(JSON.stringify(h)+
"param_type : time param_name : "+b+" layer type : "+this.type),f[b].value=m(h.time._value);g.convert._set(d,f[b],e,"integer")};g._getRadial_composite=function(d,b,e,f,h){param_type="radial_composite";f[b]={};f[b]._type=param_type;f[b].radial_composite={};h[param_type]._radius&&(h[param_type].radius=d.sifobj.sif.canvas.defs[h[param_type]._radius]);h[param_type]._theta&&(h[param_type].theta=d.sifobj.sif.canvas.defs[h[param_type]._theta]);g._set(d,"radius","real",f[b][param_type],h[param_type].radius);
g._set(d,"theta","angle",f[b][param_type],h[param_type].theta);g.convert._set(d,f[b],e,param_type)};g._getColor=function(d,b,e,f,h){e={paused:!0,useTick:!0};d=d.timeline;f[b]={};f[b].animated=!0;if(h.animated){w=h.animated.waypoint;f[b].r=w[0].color.r;f[b].g=w[0].color.g;f[b].b=w[0].color.b;f[b].a=w[0].color.a;tw=createjs.Tween.get(f[b],e);"0s"!==w[0]._time&&tw.to({r:w[0].color.r,g:w[0].color.g,b:w[0].color.b,a:w[0].color.a},sifPlayer._secsToMillis(w[0]._time),sifPlayer._getEase(w[0]._before));for(b=
0;b<w.length-1;b++)tw.to({r:w[b+1].color.r,g:w[b+1].color.g,b:w[b+1].color.b,a:w[b+1].color.a},sifPlayer._secsToMillis(w[b+1]._time)-sifPlayer._secsToMillis(w[b]._time),sifPlayer._getEase(w[b+1]._before));d.addTween(tw)}else f[b].r=h.color.r,f[b].g=h.color.g,f[b].b=h.color.b,f[b].a=h.color.a};g._getGradient=function(d,b,e,f,h,g){g="gradient";e={paused:!0,useTick:!0};d=d.timeline;f[b]={};var j;if(h.animated){w=h.animated.waypoint;f[g]={};f[g].color=[];for(var k=0,l=w[0].gradient.color.length;k<l;k++){f[g].color.push({});
j=f[g].color[k];b=w[0].gradient.color[k];j.pos=b._pos;j.r=b.r;j.g=b.g;j.b=b.b;j.a=b.a;tw=createjs.Tween.get(j,e);"0s"!==w[0]._time&&tw.to({pos:b._pos,r:b.r,g:b.g,b:b.b,a:b.a},sifPlayer._secsToMillis(w[0]._time),sifPlayer._getEase(w[0]._before));h=0;for(j=w.length-1;h<j;h++)b=w[h+1].gradient.color[k],tw.to({pos:b._pos,r:b.r,g:b.g,b:b.b,a:b.a},sifPlayer._secsToMillis(w[h+1]._time)-sifPlayer._secsToMillis(w[h]._time),sifPlayer._getEase(w[h+1]._before));d.addTween(tw)}}else{f[g]={};f[g].color=[];k=0;
for(l=h[g].color.length;k<l;k++)f[g].color.push({}),j=f[g].color[k],b=h[g].color[k],j.pos=b._pos,j.r=b.r,j.g=b.g,j.b=b.b,j.a=b.a}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.vector={_get:function(g,d,b,e,f){var h,i;h={paused:!0,useTick:!0};var j=g.timeline;e[d]={};if(f.animated){f=f.animated.waypoint;e[d].x=f[0].vector.x;e[d].y=f[0].vector.y;h=createjs.Tween.get(e[d],h);"0s"!==f[0]._time&&(i=sifPlayer._secsToMillis(f[0]._time),h.to({x:f[0].vector.x,y:f[0].vector.y},i,sifPlayer._getEase(f[0]._before)));for(var k=0;k<f.length-1;k++)i=sifPlayer._secsToMillis(f[k+1]._time)-sifPlayer._secsToMillis(f[k]._time),h.to({x:f[k+1].vector.x,y:f[k+1].vector.y},
i,sifPlayer._getEase(f[k+1]._before));j.addTween(h);sifPlayer.param.convert._set(g,e[d],b,"vector")}else f.vector?(e[d].x=f.vector.x,e[d].y=f.vector.y,sifPlayer.param.convert._set(g,e[d],b,"vector",!1)):alert(JSON.stringify(f)+" in vector")},_setConvert:function(g,d,b,e){g=sifPlayer.param.vector;b===e?(d.getX=g.getX,d.getY=g.getY,d.setVector=g.setVector,d.setX=g.setX,d.setY=g.setY):"radial_composite"===e?(d.getX=g.getRadialX,d.getY=g.getRadialY):"composite"===e?(d.getX=g.getCompositeX,d.getY=g.getCompositeY):
"add"===e?(d.getX=g.getAddX,d.getY=g.getAddY):"scale"===e?d.scale.composite?(d.getX=g.getScaleCompositeX,d.getY=g.getScaleCompositeY):d.scale.radial_composite?(d.getX=g.getScaleRadialX,d.getY=g.getScaleRadialY):(d.getX=g.getScaleX,d.getY=g.getScaleY):"subtract"===e&&(d.getX=g.getSubX,d.getY=g.getSubY)},setVector:function(g,d){this.x=g;this.y=d},setX:function(g){this.x=g},setY:function(g){this.y=g},getX:function(){return this.x},getY:function(){return this.y},getScaleX:function(){return this.scale.link.getX()*
this.scale.scalar.getValue()},getScaleY:function(){return this.scale.link.getY()*this.scale.scalar.getValue()},getScaleCompositeX:function(){return this.scale.composite.x.getValue()*this.scalar.getValue()},getScaleCompositeY:function(){return this.scale.composite.y.getValue()*this.scalar.getValue()},getScaleRadialX:function(){var g=this.scale.radial_composite.theta.getValue()*Math.PI/180,d=this.scale.radial_composite.radius.getValue();return Math.cos(g)*d*this.scalar.getValue()},getScaleRadialY:function(){var g=
this.scale.radial_composite.theta.getValue()*Math.PI/180,d=this.scale.radial_composite.radius.getValue();return Math.sin(g)*d*this.scalar.getValue()},getRadialX:function(){var g=this.radial_composite.theta.getValue()*Math.PI/180,d=this.radial_composite.radius.getValue();return Math.cos(g)*d},getRadialY:function(){var g=this.radial_composite.theta.getValue()*Math.PI/180,d=this.radial_composite.radius.getValue();return Math.sin(g)*d},getCompositeX:function(){return this.composite.x.getValue()},getCompositeY:function(){return this.composite.y.getValue()},
getAddX:function(){return(this.add.lhs.getX()+this.add.rhs.getX())*this.add.scalar.getValue()},getAddY:function(){return(this.add.lhs.getY()+this.add.rhs.getY())*this.add.scalar.getValue()},getSubX:function(){return(this.subtract.lhs.getX()-this.subtract.rhs.getX())*this.subtract.scalar.getValue()},getSubY:function(){return(this.subtract.lhs.getY()-this.subtract.rhs.getY())*this.subtract.scalar.getValue()}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.integer={_setConvert:function(g,d,b,e){g=sifPlayer.param.integer;b===e?(d.getValue=g.getValue,d.setValue=g.setValue):g[e]?d.getValue=g[e]:alert("no convert for integer to "+e)},setValue:function(g){this.value=g},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){var g={degsToRad:0.0174532925,_setConvert:function(d,b,e,f){d=sifPlayer.param.real;e===f?(b.getValue=d.getValue,b.setValue=d.setValue):d[f]?b.getValue=d[f]:alert("no convert for real to "+f)},setValue:function(d){this.value=d},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()},cos:function(){return this.cos.amp.getValue()*Math.cos(this.cos.angle.getValue()*g.degsToRad)},sine:function(){return this.sine.amp.getValue()*Math.sin(this.sine.angle.getValue()*g.degsToRad)},dotproduct:function(){var d,b,e,f;d=this.dotproduct.lhs.getX();b=this.dotproduct.lhs.getY();e=this.dotproduct.rhs.getX();f=this.dotproduct.rhs.getY();return d*e+b*f},exp:function(){return Math.exp(this.exp.exp.getValue())*this.exp.scale.getValue()},logarithm:function(){var d=this.logarithm.link.getValue();
return d>=this.logarithm.epsilon.getValue()?Math.log(d):-this.logarithm.infinite.getValue()},reciprocal:function(){var d=this.reciprocal.link.getValue();return d>=this.reciprocal.epsilon.getValue()?1/d:-this.reciprocal.infinite.getValue()}};sifPlayer.param.real=g})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.angle={_setConvert:function(g,d,b,e){g=sifPlayer.param.angle;b===e?(d.getValue=g.getValue,d.setValue=g.setValue):g[e]?d.getValue=g[e]:alert("no convert for angle to "+e)},setValue:function(g){this.value=g},getValue:function(){return this.value},add:function(){return(this.add.lhs.getValue()+this.add.rhs.getValue())*this.add.scalar.getValue()},subtract:function(){return(this.subtract.lhs.getValue()-this.subtract.rhs.getValue())*this.subtract.scalar.getValue()},scale:function(){return this.scale.link.getValue()*
this.scale.scalar.getValue()},atan2:function(){return 180*(Math.atan2(this.atan2.y.getValue(),this.atan2.x.getValue())/Math.PI)},dotproduct:function(){var g,d,b,e;g=this.dotproduct.lhs.getX();d=this.dotproduct.lhs.getY();b=this.dotproduct.rhs.getX();e=this.dotproduct.rhs.getY();return 180*(Math.acos((g*b+d*e)/(Math.sqrt(g*g+d*d)*Math.sqrt(b*b+e*e)))/Math.PI)},vectorangle:function(){return 180*(Math.atan2(this.vectorangle.vector.getY(),this.vectorangle.vector.getX())/Math.PI)}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){sifPlayer.param.bool={_get:function(g,d,b,e,f){var h=sifPlayer.param,i,j;i={paused:!0,useTick:!0};var k=g.sifobj.timeline,l,m=0,p=[0,1];e[d]={};if(f.animated){f=f.animated.waypoint;e[d].value=f[0].bool._value;i=createjs.Tween.get(e[d],i);"0s"!==f[0]._time&&(l=sifPlayer.Ease.bool,j=sifPlayer._secsToMillis(f[0]._time),i.to({value:f[0].bool._value},j,l));for(var n=0;n<f.length-1;n++)l=p[1-m]?sifPlayer.Ease.bool:sifPlayer.Ease.constant,m=1-m,j=sifPlayer._secsToMillis(f[n+1]._time)-sifPlayer._secsToMillis(f[n]._time),
f[n].bool._value!==f[n+1].bool._value?i.to({value:f[n+1].bool._value},j,l):i.wait(j);k.addTween(i)}else f.bool||alert(JSON.stringify(f)+"param_type : bool param_name : "+d+" layer type : "+this.type),e[d].value=f.bool._value;h.convert._set(g,e[d],b,"bool")},_setConvert:function(g,d,b,e){g=sifPlayer.param.bool;b===e?(d.getValue=g.getValue,d.setValue=g.setValue):"and"===e&&(d.getValue=g.getAnd)},setValue:function(g){this.value=g},getValue:function(){return this.value},getAnd:function(){return this.link1&&
this.link2}}})();this.sifPlayer.param=this.sifPlayer.param||{};
(function(){var g={_get:function(d,b,e,f,h){var g=sifPlayer.param,j=g._set,k="composite";f[b]={};f[b]._type=k;f[b].composite={};if("vector"===h.composite._type)h[k]._x&&(h[k].x=d.sifobj.sif.canvas.defs[h[k]._x]),h[k]._y&&(h[k].y=d.sifobj.sif.canvas.defs[h[k]._y]),j(d,"x","real",f[b].composite,h.composite.x),j(d,"y","real",f[b].composite,h.composite.y),g.convert._set(d,f[b],e,k);else if("bline_point"===h.composite._type){var l=f[b].composite,k=h.composite._type;h.composite._point&&(h.composite.point=
d.sifobj.sif.canvas.defs[h.composite._point]);j(d,"point","vector",l,h.composite.point);j(d,"width","real",l,h.composite.width);j(d,"origin","real",l,h.composite.origin);j(d,"split","bool",l,h.composite.split);j(d,"t1","vector",l,h.composite.t1);j(d,"t2","vector",l,h.composite.t2);g.convert._set(d,f[b].composite,e,k,h.composite.point.animated||h.composite.width.animated||h.composite.origin.animated||h.composite.t1.animated||h.composite.t2.animated)}},_setConvert:function(d,b,e,f){"bline_point"===
f?(b.getPoint=g.getPoint,b.getT1=g.bline_point_getT1,b.getT2=g.bline_point_getT2):alert("new type of point")},getPoint:function(){return this.point},bline_point_getPoint:function(){return this.point},bline_point_getT1:function(){return{x:this.t1.getX()/3,y:this.t1.getY()/3}},bline_point_getT2:function(){return{x:this.t2.getX()/3,y:this.t2.getY()/3}}};sifPlayer.param.composite=g})();this.sifPlayer.param=this.sifPlayer.param||{};this.sifPlayer.param.convert=this.sifPlayer.param.convert||{};(function(){sifPlayer.param.convert._set=function(g,d,b,e){"vector"===b?sifPlayer.param[b]._setConvert(g,d,b,e):"real"===b?sifPlayer.param[b]._setConvert(g,d,b,e):"integer"===b?sifPlayer.param[b]._setConvert(g,d,b,e):"angle"===b?sifPlayer.param[b]._setConvert(g,d,b,e):"bool"===b?sifPlayer.param[b]._setConvert(g,d,b,e):"composite"===b&&sifPlayer.param[b]._setConvert(g,d,b,e)}})();(function(){function g(){}var d=g.prototype=new createjs.Shape;d.init=function(b,e){this.sifobj=b;var f=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this._getBline(e.bline);f(this,"blend_method","integer",this,e.blend_method);f(this,"amount","real",this,e.amount);f(this,"origin","vector",this,e.origin);f(this.bline,"color","color",this,e.color);e.width&&f(this.bline,"width","real",this,e.width);sifPlayer._addToDesc(this,e);this.entries=this.collectEntries();
this.makeShape();this.aabb=sifPlayer.aabbFromEntries(this.entries,this.width?this.width.getValue():null);this.getMatrix()};d._getBline=function(b){var e=sifPlayer.param._set;this.bline={};this.bline.sifobj=this.sifobj;this.bline.timeline=new createjs.Timeline;this.bline.timeline.setPaused(!0);this.bline.entry=[];this.bline.loop=b.bline._loop;for(var f=0,h=b.bline.entry.length;f<h;f++){var d={};e(this.bline,"composite","composite",d,b.bline.entry[f]);this.bline.entry.push(d.composite)}};d.collectEntries=
function(){var b=[],e,f;e=this.bline.entry[0].composite.getPoint();b.push([e.getX(),e.getY()]);for(var h=0,d=this.bline.entry.length-1;h!==d;h++)e=this.bline.entry[h].composite,f=this.bline.entry[h+1].composite,e.split.getValue()?b.push(this._bezierEntry(e.getPoint(),f.getPoint(),e.getT2(),f.getT1())):b.push(this._bezierEntry(e.getPoint(),f.getPoint(),e.getT1(),f.getT1()));this.bline.loop&&(e=this.bline.entry[this.bline.entry.length-1].composite,f=this.bline.entry[0].composite,e.split.getValue()?
b.push(this._bezierEntry(e.getPoint(),f.getPoint(),e.getT2(),f.getT1())):b.push(this._bezierEntry(e.getPoint(),f.getPoint(),e.getT1(),f.getT1())));return b};d._bezierEntry=function(b,e,f,d){var g;g=f.x+b.getX();b=f.y+b.getY();f=-d.x+e.getX();d=-d.y+e.getY();return[g,b,f,d,e.getX(),e.getY()]};d.makeShape=function(){var b=this.entries,e=this.graphics;e.clear();e.f(createjs.Graphics.getRGB(Math.round(256*this.color.r),Math.round(256*this.color.g),Math.round(256*this.color.b),this.color.a));e.mt(b[0][0],
b[0][1]);for(var f=1,d=b.length;f!==d;f++)e.bt(b[f][0],b[f][1],b[f][2],b[f][3],b[f][4],b[f][5]);e.ef()};d.setPosition=function(b){this.timeline.setPosition(b);this.bline.timeline.setPosition(b);this.animated=sifPlayer._checkTimeline(this.timeline);this.updateShape();return b};d.updateShape=function(){var b;b=this.width?this.width.getValue():null;if(sifPlayer._checkTimeline(this.bline.timeline))this.entries=this.collectEntries(),this.makeShape(),this.uncache(),this.animated=!0;else if(b=sifPlayer.aabbFromEntries(this.entries,
b),this.setBounds(b[0],b[1],b[2]-b[0],b[3]-b[1]),!this.cacheID){var e=Math.abs(sifPlayer.easelSif.getTotalScale(this));this.cache(b[0],b[1],b[2]-b[0],b[3]-b[1],e)}};d.compareEntries=function(b){var e=this.entries;if(this.entries){if(e[0][0]!==b[0][0]||e[0][1]!==b[0][1])return!1;for(var f=1,d=e.length;f<d;f++)if(e[f][0]!==b[f][0]||e[f][1]!==b[f][1]||e[f][2]!==b[f][2]||e[f][3]!==b[f][3]||e[f][4]!==b[f][4]||e[f][5]!==b[f][5])return!1}else return!1;return!0};d.updateContext=function(b){var e=this.getMatrix();
b.globalAlpha*=this.amount.getValue();b.globalCompositeOperation=sifPlayer.easelSif._getBlend(this.blend_method.getValue());b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)};d.getMatrix=function(b){var b=this.origin.getX(),e=this.origin.getY(),b=this._matrix.identity().appendTransform(b,e,1,1,0,0,0,0,0);return b=b.copy(b)};sifPlayer.easelSif.region=g})();(function(){function g(){this.type="group"}var d=g.prototype=new createjs.Container;d.init=function(b,e){this.sifobj=b;var f=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;f(this,"amount","real",this,e.amount);f(this,"blend_method","integer",this,e.blend_method);f(this,"origin","vector",this,e.origin);this.transformation={};var d=e.transformation.composite;d&&(f(this,"offset","vector",this.transformation,
d.offset),f(this,"angle","angle",this.transformation,d.angle),f(this,"skew_angle","angle",this.transformation,d.skew_angle),f(this,"scale","vector",this.transformation,d.scale),f(this,"skew_angle","angle",this.transformation,d.skew_angle),this.getMatrix=g.getMatrixComposite,this.scaleX=this.transformation.scale.getX());if(d=e.transformation.bone_link){this.bone=d.bone[0].bone_valuenode._guid;var d=e.transformation.bone_link.base_value.composite,i={};f(this,"offset","vector",i,d.offset);f(this,"angle",
"angle",i,d.angle);f(this,"skew_angle","vector",i,d.skew_angle);f(this,"scale","vector",i,d.scale);this.base_value=i;this.getMatrix=g.getMatrixBone;this.getMatrix()}sifPlayer._addToDesc(this,e);if(e.canvas)if(e.canvas.canvas)this._getLayers(e.canvas.canvas.layer);else if(f=e.canvas._use,0<f.search("#")){d=this.sifobj.sifPath+f.slice(0,f.length-1);this._use=new sifPlayer.easelSif.SifObject;this._use.preload=this.sifobj.preload;this._use.sifPath=this.sifobj.sifPath+f.slice(0,f.lastIndexOf("/")+1);this._use.init(this.sifobj.preload.getResult(d));
f=this._use.children.slice(0);d=0;for(i=f.length;d<i;d++)this.addChild(f[d]);this._use.removeAllChildren()}else this._getLayers(this.sifobj.sif.canvas.defs[e.canvas._use].canvas.layer)};d._getLayers=sifPlayer.easelSif.SifObject.prototype._getLayers;d.moveChildrenTo=sifPlayer.easelSif.SifObject.prototype.moveChildrenTo;d.setPosition=function(b,e){this.childAnimated=!1;this.animated=this.bone?!0:sifPlayer._checkTimeline(this.timeline);var f;this.timeline.setPosition(b);f=this.timeline.position;for(var d=
this.children,g=0,j=d.length;g<j;g++)f=d[g].unsynced?d[g].setPosition(d[g].timeline.position+e,e):d[g].setPosition(f,e),d[g].animated&&(d[g].uncache(),this.childAnimated=this.animated=!0);this.childAnimated&&this.uncache();!this.childAnimated&&(!this.cacheID&&"group"===this.type)&&(this.uncache(),f=Math.abs(sifPlayer.easelSif.getTotalScale(this)),(d=this.getBounds())&&this.cache(d.x,d.y,d.width,d.height,f));return b};d.updateContext=function(b){var e=this.getMatrix();b.globalAlpha*=this.amount.getValue();
b.globalCompositeOperation=sifPlayer.easelSif._getBlend(this.blend_method.getValue());b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)};g.getMatrixBone=function(b){var b=this.base_value,e=this._matrix.copy(this.sifobj.sif.bones.guid[this.bone]._m);e.appendTransform(b.offset.getX(),b.offset.getY(),b.scale.getX(),b.scale.getY(),b.angle.getValue(),0,0,0,0);return b=e.copy(e)};g.getMatrixComposite=function(b){var e=this.transformation,b=this.origin.getX()+e.offset.getX(),d=this.origin.getY()+e.offset.getY(),g=
this.scaleX=e.scale.getX(),i=this.scaleY=e.scale.getY(),e=e.angle.getValue(),b=this._matrix.identity().appendTransform(b,d,g,i,e,0,0,0,0);return b=b.copy(b)};sifPlayer.easelSif.group=g})();this.sifPlayer=this.sifPlayer||{};this.sifPlayer.easelSif=this.sifPlayer.easelSif||{};
(function(){function g(){}(g.prototype=new sifPlayer.easelSif.region).makeShape=function(){var d=this.entries,b=this.graphics;b.clear();b.setStrokeStyle(this.width.getValue());b.s(createjs.Graphics.getRGB(Math.round(256*this.color.r),Math.round(256*this.color.g),Math.round(256*this.color.b),this.color.a));b.mt(d[0][0],d[0][1]);for(var e=1,f=d.length;e!==f;e++)b.bt(d[e][0],d[e][1],d[e][2],d[e][3],d[e][4],d[e][5]);b.es()};sifPlayer.easelSif.outline=g})();(function(){function g(b,e){this.sifobj=b;this.init(e)}var d=g.prototype=new createjs.Shape;d.init=function(b){var e=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;e(this,"amount","real",this,b.amount);e(this,"origin","vector",this,b.origin);e(this,"radius","real",this,b.radius);e(this,"blend_method","integer",this,b.blend_method);e(this,"color","color",this,b.color);sifPlayer._addToDesc(this,
b);this.makeShape()};d.makeShape=function(){var b=this.graphics;this.rad=this.radius.getValue();this.r=this.color.r;this.g=this.color.g;this.b=this.color.b;this.a=this.color.a;b.f(createjs.Graphics.getRGB(Math.round(256*this.r),Math.round(256*this.g),Math.round(256*this.b),this.a));b.dc(0,0,this.rad);b.ef()};d.setPosition=function(b){this.timeline.setPosition(b);return b};d.updateContext=function(b){var e=this.getMatrix(this._matrix);b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty);b.globalAlpha*=this.amount.getValue();
b.globalCompositeOperation=sifPlayer.easelSif._getBlend(this.blend_method.getValue())};d.getMatrix=sifPlayer.easelSif.region.prototype.getMatrix;sifPlayer.easelSif.circle=g})();(function(){function g(){}var d=g.prototype=new createjs.Bitmap;d.init=function(b,e){this.sifobj=b;var d=sifPlayer.param._set;this.initialize(this.sifobj.preload.getResult(this.sifobj.sifPath+e.filename.string));this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);d(this,"amount","real",this,e.amount);d(this,"blend_method","integer",this,e.blend_method);d(this,"tl","vector",this,e.tl);d(this,"br","vector",this,e.br);sifPlayer._addToDesc(this,e)};d.setPosition=function(b){this.timeline.setPosition(b);
return b};d.updateContext=function(b){var e=this.getMatrix(this._matrix);b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty);b.globalAlpha*=this.amount.getValue();b.globalCompositeOperation=sifPlayer.easelSif._getBlend(this.blend_method.getValue())};d.getMatrix=function(b){var e=this.br.getX(),d=this.br.getY(),b=this.tl.getX(),g=this.tl.getY(),i,j,e=e-b,d=g-d;0>=e?(i=-1,e*=-1):i=1;0>=d?(j=1,d*=-1):j=-1;i=i/this.image.width*e;j=j/this.image.height*d;b=this._matrix.identity().appendTransform(b,g,i,j,0,0,0,0,0);
return b=b.copy(b)};sifPlayer.easelSif.Import=g})();(function(){function g(){this.type="rotate"}var d=g.prototype=new createjs.Container;d.init=function(b,e){this.sifobj=b;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;this._setParams(e);sifPlayer._addToDesc(this,e);this.getMatrix()};d._setParams=function(b){var e=sifPlayer.param._set;e(this,"origin","vector",this,b.origin);e(this,"amount","angle",this,b.amount)};d.setPosition=sifPlayer.easelSif.group.prototype.setPosition;
d.updateContext=function(b){var e=this.getMatrix();b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)};d.getMatrix=function(b){var b=this.origin.getX(),e=this.origin.getY(),d=this.amount.getValue(),b=this._matrix.identity().appendTransform(b,e,1,1,d,0,0,b,b);return b=b.copy(b)};sifPlayer.easelSif.rotate=g})();(function(){function g(){this.type="stretch"}var d=g.prototype=new sifPlayer.easelSif.rotate;d._setParams=function(b){var e=sifPlayer.param._set;e(this,"amount","vector",this,b.amount);e(this,"center","vector",this,b.center)};d.getMatrix=function(b){var b=this.center.getX(),e=this.center.getY(),d=this.scaleX=this.amount.getX(),g=this.amount.getY(),b=this._matrix.identity().appendTransform(b,e,d,g,0,0,0,b,b);return b=b.copy(b)};sifPlayer.easelSif.stretch=g})();(function(){function g(){this.type="translate"}var d=g.prototype=new sifPlayer.easelSif.rotate;d._setParams=function(b){var d=sifPlayer.param._set;d(this,"origin","vector",this,b.origin)};d.getMatrix=sifPlayer.easelSif.region.prototype.getMatrix;sifPlayer.easelSif.translate=g})();(function(){function g(){this.type="zoom"}var d=g.prototype=new sifPlayer.easelSif.rotate;d._setParams=function(b){var d=sifPlayer.param._set;d(this,"center","vector",this,b.center);d(this,"amount","real",this,b.amount)};d.getMatrix=function(b){var b=this.center.getX(),d=this.center.getY(),f=this.scaleX=Math.exp(this.amount.getValue()),b=this._matrix.identity().appendTransform(b,d,f,f,0,0,0,b/f,b/f);return b=b.copy(b)};sifPlayer.easelSif.zoom=g})();(function(){function g(){this.type="timeloop"}var d=g.prototype=new createjs.DisplayObject;d.init=function(b,d){this.sifobj=b;var f=sifPlayer.param._set;this.initialize();this.timeline=new createjs.Timeline;this.timeline.setPaused(!0);this.timeline.duration=this.sifobj.timeline.duration;f(this,"link_time","integer",this,d.link_time);f(this,"local_time","integer",this,d.local_time);f(this,"duration","integer",this,d.duration);sifPlayer._addToDesc(this,d)};d.setPosition=function(b){this.timeline.tick(b-
this.timeline.position);var d=this.duration.getValue(),f=this.link_time.getValue(),g=this.local_time.getValue(),b=(b+g)%d;return 0!=d?0<d?b+f:f-b:f};sifPlayer.easelSif.timeloop=g})();(function(){function g(){this.type="skeleton"}var d=g.prototype=new createjs.Shape;d.init=function(b,d){this.sifobj=b;var f=sifPlayer.param._set;this.initialize();f(this,"amount","real",this,d.amount);this._getBones(d.bones);sifPlayer._addToDesc(this,d)};d._getBones=function(b){for(var d=[],b=b.static_list.entry,f=0,g=b.length;f<g;f++)d[f]=b[f].bone[0]._guid;this.bones=d};d.setPosition=function(b){for(var d=this.sifobj.sif.bones.guid,f=this.bones,g=f.length-1;0<=g;g--)d[f[g]].setPosition(b),d[f[g]].animated=
sifPlayer._checkTimeline(d[f[g]].timeline);this.animated=!0;return b};sifPlayer.easelSif.skeleton=g})();(function(){function g(){this.type="switch"}var d=g.prototype=new sifPlayer.easelSif.group;d.init_group=d.init;d.init=function(b,d){this.init_group(b,d)};sifPlayer.easelSif.Switch=g})();
